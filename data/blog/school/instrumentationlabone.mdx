---
title: Instrumentation Lab 1
date: '2021-08-15'
tags: ['school', 'instrumentation']
---

This is an overview of the knowledge needed for the selection and operation of measuring instruments for different variables. Understand the measurement principles of sensors and instrumentation used in industrial processes. Requires knowledge in circuits, electricity and magnetism.

***

1. [Basic Concepts](#basic-concepts)
2. [Sensor Classification](#sensor-classification)
3. [Static and Dynamic Characteristics](#static-and-dynamic)
4. [Circuit Bridges](#circuit-bridges) 
5. [Instrumentation and signals](#instrumentation-and-signals)
6. [Optocouplers](#optocouplers)
7. [Operational Amplifiers](#operational-amplifiers)
8. [Filters](#filters)
9. [Oscillators and Converters](#oscillators-and-converters)
10. [Piping and Diagrams (NEMA and IP)](#piping-and-diagrams)
11. [LabView Filters](#labview-filters)
12. [LabView DAQ](#labview-daq)

***

# Basic Concepts #

**Instrument**

![Measuring Instrument](/static/images/notes/MeasureSystemInstruLab.png)

The device detects an input with sensors or transducers. Then it process the input signal in its signal processing unit or DAQ (Data Acquisition System). In this process it is usually converted from analog to digital values. Then it finally sends the data to a display, recorder or HMI (Human Machine Interface). HMI's in the industry are robust devices capable of withstanding drops, dust, water, oils, radiation, salt and even explosive damage or blasts.

**Sensors**

Device that responds to any change in physical, chemical or even biological phenomena. The phenomena will change the physical, chemical or electromagnetic properties of the sensors themselves. The change will be processed into a more usable form like a voltage or current signal that the DAQ can condition (amplify, filter, convert etc). The relationship between the phenomena's input and the sensor's output needs to be linear, if not we must calibrate the sensor to a reference value or standard to linearize its output. 

![Thermocouple Sensor](/static/images/notes/ThermocoupleExampleInstruLab.png)

For example, thermocouples are sensors that measure temperature at their junction (union of two different metals) producing a voltage that can then be measured by a voltmeter. The voltage originates from the Seebeck effect of metals when subjected to a temperature gradient. The thermocouple uses two different metals to measure their Seebeck voltage differential relative to a cold reference point, usually room temperature or 25°.

Note that the range of temperatures that the thermocouple will be able to measure depends on the range on which the voltage and temperature proportionality for both metals remains linear. A transducer is the part of the sensor that is the first in contact with the phenomena and usually the one responsible for transforming the phenomena's energy into an electric signal. 

***

# Sensor Classification #

**Sensors by Phenomena**

![Sensor Classification Phenomena](/static/images/notes/ThermocoupleInstruLab.png)

**Sensors by Power**

* Passive: Sensor that do require an external power source to function. Most resistive, inductive and capacitive sensors are passive. Note that inductive sensors will measure mostly metals while capacitive sensors can measure a broader variety of materials.
* Active: Sensors that don't require an external power source since they generate power themselves (self generating) from the quantity they measure. Note that this sensors are calibrated to take into account the energy they consume in their measurements (Power Consumption Rating).

**Sensors by Output**

* Analog: Sensors that convert the phenomena to a *time-continuous* electrical form. For example thermocouples, RTD's or strain gauges.
* Digital: Sensors that convert the phenomena to a *time-discrete* electrical form meaning a series of electrical pulses. For example encoders.

**Inverse Sensors**

Inverse sensors are *Piezoelectric* devices made of crystals that generate an output voltage when subjected to a vertical external force. We call them inverse since they can also act as actuators meaning that we can generate a horizontal force or vibration by applying an input voltage.

**Instrument Classification**

![General Classification](/static/images/notes/GeneralInstrumentClassificationInstruLab.png)

* Electrical instruments: They measure electrical quantities like power, voltage or current using a mechanical system that due to its inertia is prone to have a limited time response. They are made up of passive elements like resistors, inductors and capacitors, in contrast to electronic instruments that are made up of non linear semiconductor components.
* Absolute: Output is in terms of physical constraints. For example a tangent galvanometer, absolute electrometer or Rayleigh's current balance.

$$
\begin{gathered}
	\text{Tangent Galvanometer Relation}\\
	i = \frac{2r\beta_{x}}{\mu_{0} n}\tan(\theta)\\
	n = \text{ Number Turns}\\
	r = \text{ Turn radius}\\
	\beta_{x} = \text{ Horizontal Magnetic Flux Density}\\
	\mu_{o} = \text{ Permeability Of Free Space}\\
	\mu_{o} = (4\pi) \times 10^{-7} T\\
	\theta = \text{ Deflection produced}
\end{gathered}
$$

* Secondary: Output is in terms of calibration when compared to absolute instruments. Commercial measuring instruments like micrometer, caliper, level or gauge block.
* Digital: Output in numeric form from a display, they are more accurate by reducing human error when observing the measurement. Digital multimeter.
* Analog: Output varies as it measures, needle pointer indicates magnitude, prone to human error from the observed position of the pointer. Analogue multimeter.
* Deflection: A pointer's net deflection is proportional to the quantity measured.  Permanent magnet moving coil ammeter or a simple weight pressure gauge scale.
* Indicating: Indicates the current magnitude with a dial that moves on the graduated dial. Voltmeter, ammeter, power factor meter.
* Integrating: Measures total energy supplied over a time interval via summation of the quantity sampled. Energy meters and watt-hour meters.
* Recording: Records the current magnitude over a period of time. In a seismometer a moving system carries a pen over a paper sheet.
* Null: It measures the opposite effect needed to maintain a pointer stationary and then infers the value of the original quantity. Triple beam balance.

Deflection instruments depend on their calibration while null instruments depend on the calibration of their opposing effect, therefore deflection instruments tend to have lower accuracy and sensitivity than null instruments but fare better in dynamic conditions where their intrinsic response time is faster.

***

# Static and Dynamic #

**Static**

Characteristics of measured quantities that are constant or change slowly relative to time. For example the temperature in a furnace.

* Precision: Closeness of the readings in relation to each other. Related to the static characteristic of repeatability.
* Accuracy: Closeness of the readings in relation to the true value.

![Accuracy and Precision](/static/images/notes/AccuracyPressicionLabInstru.gif)

* Absolute Accuracy: Closeness of the reading to the true value in their common unit scale.

$$
\begin{gathered}
	E_a = |X_m - X_t|\\
	X_m = \text{ Measured Value}\\
	X_t = \text{ True Value}
\end{gathered}
$$

* Relative Accuracy: Closeness of the reading to the true value independent of their units.

$$
\begin{gathered}
	E_r = \frac{|X_m - X_t|}{X_t} \times 100 \%
\end{gathered}
$$

* Threshold: Smallest input after zero that the instrument can detect and output with certainty.
* Dead Space: Starting from zero its the continuous range of input values where no output is generated. The threshold is the highest value of the dead space.
* Resolution: Smallest and certain increment between inputs after the threshold.
* Range: Highest possible measurement that it can output with certainty.
* Span: Difference between the highest (range) and lowest (threshold) possible measurements.
* Repeatability: Precision of the instrument's measurements while being turned on and off. High repeatability corresponds to a low drift.
* Drift: Offset in the instrument caused by an external phenomena like EMF's, vibration, temperature, wear, tear etc.
	* Zero Drift: Constant offset in the output for every input.
	* Span Drift: Also called sensitivity drift is a change in the slope of the output for every input. Note that there is possible to have a combination of zero drift and the span drift.
	* Zonal Drift: Sudden zero or span drift but localized to a specific range of inputs. Note that zonal drift is very difficult to compensate.
* Sensitivity: Ratio between the magnitude of the output and the magnitude of the input (slope). Note that the unit of sensitivity is a combination of the output over the input.
* Hysteresis: Instrument phenomena where it takes a long time to unload the energy that has being loaded into it. It happens in electrical and mechanical instruments when the energy we were measuring remains as residual energy in a stressed part of the system even after removing the original load. 

![Static Characteristics](/static/images/notes/StaticCharacteristicsInstruLab.png)

An example of hysteresis takes place in a transformer where the magnetic field in the coil used to increase or decrease the voltage is persistent so we need extra energy to counteract the residual magnetic field generated due to hysteresis. This extra energy is lost as heat in the ferromagnetic core.

* [Video about Hysteresis](https://www.youtube.com/watch?v=FYZBmNxV9N4)

**Dynamic**

Characteristics of measured quantities that change rapidly relative to time. For example when measuring force values as opposite force reactions introduce noise. They can be divided into *Frequency* or *Time* characteristics:

* Time: Related to the instrument's response (output) when applying a step function (input).
	* First Order Response
		* Rising Time: Time it takes the output to increase from 10% to 90%.
		* Time Constant (Tau): Time it takes to reach 63.2% of its maximum output.
		* Dead Time: Time until the first output is registered. Associated to the deadband. 
	* Second Order Response
		* Damping Factor (Gamma): Shape of the response.
			* If zero the system will oscillate.
			* If less than one the system will overshoot (underdamped system).
			* If equal to one the system will have a fast response (critically damped system).
			* If more than one the system will have a slow response (overdamped system).
		* Overshoot: Difference between initial peak and settling (<2% final value).
		* Settling Time: Time until output stabilizes within a 2% or 5% difference to its final value.
		* Frequency Response: Response (output) when the input changes by a known frequency, for example if the input is sinusoidal.
* Frequency Characteristics: Related to the instrument's response (output) when applying a variable excitation over time (sinusoidal function input).
	* Frequency Response: At a certain frequency the output will start to converge even if it continues oscillating.
	* Cut-Off frequency: Frequency at which the output falls to 70.7% of the stable output value. This is equivalent to a difference of -3dB and represents the point at which the output power is halved. Note that this can be related to the rising time.
	* Bandwidth: Range of frequencies between 0 and the Cut-Off frequency. This characteristic indicates the instrument's response speed.

$$
\begin{gathered}
	\text{Overshoot } = \frac{\text{Max Peak} - \text{V Settling}}{\text{V Settling}} \times 100\% \\
	\text{Rising Time } = \frac{0.35}{\text{Cut-Off frequency}} 
\end{gathered}
$$

![Dynamic Characteristics](/static/images/notes/TimeandFrequencyResponseInstruLab.png)

**Selecting a Good Sensor**

1. Description and functionality.
2. Magnetic field interactions.
3. Measurement limitations.
4. Noise, disturbances, power consumption.
5. Linearity, sensitivity, resolution.
6. Integration, classification, resistance.

**Power Consumption**

Power is the work done per unit of time or how much energy is being used by the system, therefore electrical power is the energy dissipated by the impedances of a circuit. When we have a DC source or an AC source but with a resistive load (zero phase angle) then the apparent power, measured in Volt per Ampere, will be equal to the active (real, true) power $P_S = VI = P_P = VI\cos(0) = \sqrt{P_P^2 + P_Q^2}$ measured in Watts.

When the circuit uses an AC source but with an inductive or capacitive load then there will be a non-zero phase angle between the voltage and current supplied to the load. This phase angle is caused by the residual (unusable, lost) energy stored in the inductors as magnetic fields or the capacitors as electric fields, this is called the reactive power $P_Q = VI\sin(\theta)$. 

Reactive power is present in inductive motors, to mitigate the parasitic current left after its rotation we add capacitors that reduce the overall power factor of the system. The power factor is the relation between the resistive loads and the impedances. By measuring the phase angle we can calculate the power factor of the circuit:

$$
\begin{gathered}
	\text{Power Factor}\\
	\cos(\theta) = \frac{P}{VI} = \frac{P}{S} = \frac{P}{Q} = \frac{R_n}{Z_n}
\end{gathered}
$$

The phase angle of an ideal capacitive circuit (negative reactive power) makes the current lead the supplied voltage by 90° and in an ideal inductive circuit (positive reactive power) it makes the current to lag by 90°. In real circuits the phase angle is a usually lower than 90 degrees.

**Capacitive and Inductive Sensors**

Commonly used as contactless proximity sensors. Some advantages over its mechanical switch counterpart is that they don't need to calculate and set the angle of approach, the don't wear out since they have no moving parts, they need less maintenance time and they don't suffer from corrosion.

Inductive proximity sensors work by generating a magnetic field through a coil and then using an oscillator (LC circuit) to generate a sinusoidal signal proportional to the magnetic field. As the metallic target passes in front of the sensor the amplitude of the sinewave changes as a response to the change in permeability. A trigger senses the change in amplitude and generates a response proportional to the target's distance. They have a high switching rate (targets in fast succession), high durability and high integration, however they can only sense metals and have a maximum detection range of 100mm. 

$$
\begin{gathered}
	L = \frac{N^2}{R} = \frac{N^2 \mu A}{l}\\
	G = \frac{A}{l} \implies L = N^2 \mu G
\end{gathered}
$$

Capacitive proximity sensors work by generating an electric field through a plate and then using an oscillator (RC circuit) to generate a sinusoidal signal. As the target passes in front of the sensor it acts as the second plate needed to create a capacitor, therefore increasing its capacitance. They have high array of material detection, work even when completely insulated (robust) and adjustable sensitivity, however they are more expensive and a maximum detection range of 25mm. Their detection range will depend on the active surface of the plate, the target's dielectric constant and the surface area of the target. Temperature and target's speed also have a minimal effect.

Capacitive proximity sensors are widely used as the underlying technology in touchscreens. For longer detection ranges we can use laser proximity sensors, some ultrasonic proximity sensors can be used in an industrial environment they are heavily dependent on an enclosure that reduces echo.

**Autotransformers**

Transformers manufactured to have multiple output terminals, each with a different number of coils. They are used inside variable voltage sources like the brand Variac. When working with high voltage circuits we are more likely to need power resistors that can dissipate the extra energy, generally high power resistors are expected to be mounted on a sheet of metal for additional heat dissipation.

**Voltage Value Representations**

![Different RMS Waves](/static/images/notes/DifferentRMSWavesLabInstru.png)

The RMS Voltage (Effective Voltage) represents the DC voltage equivalent of an AC voltage source that would generate the same power dissipation or heating effect with the current circuit load. This equivalence depends on the wave's behavior.

* Peak to Peak Voltage = $V_{pp}$
* Peak Voltage (Amplitude) = $V_p$
* Average Voltage (Sine) = $Vp \frac{2}{\pi}$
* RMS Voltage = $\frac{V_p}{\sqrt{2}}$

***

# Circuit Bridges #

**Wheatstone and Schering**

![Wheatstone and Schering](/static/images/notes/BridgesUsedwithSensorsinLabInstru.png)

* Galvanometer: Device used to detect the *magnitude and direction* of a current. Works in the presence of a magnetic field. It can *only* measure DC and its used when designing bridges or potentiometers to detect the zero current by connecting it in series. High sensitivity but low accuracy compared to the ammeter.
* Ammeter: Device used to measure the *magnitude* of the current flowing through it. Works with or without a magnetic field. It can measure AC or DC and its used when designing electric circuits by connecting it in series. High accuracy but low sensitivity compared to the galvanometer. It can be a mechanical or electronic instrument that ideally has zero resistance.

**Resistive Sensors**

Sensors that use variable or non-variable resistive transducers. They can measure temperature, pressure, displacement, force, vibrations, etc. Resistive transducers are usually considered secondary since they receive the output of a primary mechanical transducers to which they are calibrated to. Variable resistive transducers use the following principle: $R = \frac{\rho L}{A}$.

* Sliding Contact Devices: The most common type is the *potentiometer*, can be used to measure linear and angular displacement.
* Wire resistance strain gauge: Used to measure force, stress and strain. The increase in length and decrease in cross sectional area causes its resistance to change.
* Force Torque Sensors: Made from multiple strain gauges can measure forces and torques in three dimensional space.
* Thermistor: Resistance changes when subjected to a change in temperature. Made from oxides of manganese, nickel or cobalt.
* Thermocouple: Based on the Seebeck, Peltier and Thomson effects.
	* Seebeck: Two dissimilar elements experience a voltage in their junction.
	* Peltier: Voltage generated depends on the temperature of the junction.
	* Thomson: Voltage generated depends on the temperature gradient along the conductors in the circuit.

![Dynamic Characteristics](/static/images/notes/TypesOfPotentiometersInstruLab.png)

**Thermistor**

![Thermistor Types](/static/images/notes/ThermistorTypesInstruLab.png)

The Thermally Sensitive Resistor or Thermistor is a temperature sensing element composed of sintered semiconductor material with a large change in resistance from a small change in temperature. High accuracy from ±0.05% to ±0.02%, high electrical noise immunity, easy to interface and high sensitivity over its small temperature range. They work with a very small current reducing heat losses in its wiring.

Thermistors, unlike RTD's and thermocouples, don't have standards associated with their temperature-resistance curves, in other words each thermistor will have its own unique curve. They can have either positive (PTC) or negative (NTC) temperature coefficients. NTC thermistors decrease their resistance as the temperature raises. Their small size makes them suceptible to self heating errors and later prone to irreversible de-calibration (extreme drift).

**Temperature vs Resistance Curves**

![Temperature Sensors](/static/images/notes/TemperatureSensorComparisoninstrulab.png)

| Characteristic | Thermistor | RTD | TC | IC | 
| :---: | :---: | :---: | :---: | :---: |
| Span | -80°C to 300°C  | -260°C to 850°C | -600°C to 2000°C | -50°C to 150°C |
| Linearity | Exponential | High | Medium | Highest |
| Sensitivity | High | Low | Lowest | Highest |
| Response | Fast | Slow | Slow-Fast | Slow |
| Power | Needed | Needed | No | No |
| Stability | Low | Highest | Lowest | Medium |
| Self Heating | Yes | Yes | No | Yes |
| Cost | Low | Low-High | Medium-High | Low-Medium |
| Notes | High Resistance | High Accuracy | Rugged | Semiconductor Based |

***

# Instrumentation and Signals #

**Signal Conditioning Methods**

![Signal Conditioning](/static/images/notes/SignalConditioningfromInstrulab.png)

Signal conditioning circuits or software that converts the signal from a transducer into a useful signal for the Digital Processing Unit (DPU). An example is an analog to digital converter (ADC).

* Attenuation: Decrease the voltage values of the signal. For example a voltage divider.
* Protection: Logical circuit inputs such as those from TTL (5V) and CMOS (3.3V) require protection from high voltage overloads. For example clipping diodes.
* Amplification: Increase the signal for digitalization and processing, this can be done by either increasing the resolution or the signal to noise ratio (noise elimination CMRR). For example inverting, non inverting Op Amps and instrumentation amplifiers.
* Isolation: Avoids electrical disturbances that could damage digital inputs. For example transformers or optocouplers.
* Filtering: Rejects frequencies that aren't desired like the electromagnetic noise of high and low frequencies (60Hz in AC supplies). For example low, high, reject and pass band circuits.
* Stimulus: Electrical excitation required from some sensors to generate their output. For example Resistance Temperature Detectors (RTDs).
* Linearization: Force the signal to have a linear behavior, suppress non-linear regions of sensors like the thermocouple. For example a logarithmic amplifier.

**Sensors with Conditioning**

![Sensors with Cond](/static/images/notes/SignalConditioningSensorsInstrulab.png)

Operation Range of Thermocouples

| Type | Range |
| :---: | :---: |
| Copper-Constantan (T) | -140 - 400 |
| Chromel-Constantan (E) | -180 - 1000 |
| Iron-Constantan (J) | 30 - 900 |
| Chromel-Alumel (K) | 30 - 1400 |
| Nicrosil-Nisil (N) | 30 - 1400 |
| Platinum (rhodium 10%) - Platinum S | 30 - 1700 |
| Platinum (rhodium 13%) - Platinum R | 30 - 1700 |

**Instrument Protection Norms**

Industrial instruments and their sensors have higher protection, quality of measuring (static and dynamic characteristics) and robustness than the instruments of the lab.

Ingress protection rating (IP) or IEC 60529, determines the protection that an enclosure provides against external solid particles (First Number) or liquids (Second Number).

| First Number | Diameter | Second Number | Description |
| :---: | :---: | :---: | :---: |
| 0 | None | 0 | None |
| 1 | 50mm | 1 | Dripping |
| 2 | 12mm | 2 | Dripping Tilted 15° |
| 3 | 2.5mm | 3 | Spraying (60°) |
| 4 | 1mm | 4 | Splashing |
| 5 | Limited Dust | 5 | Jet Spray |
| 6 | Dust Proof | 6 | Heavy Jet Spray |
| - | - | 7 | Immersion (15cm to 1m for 30min)|
| - | - | 8 | Submersion |

![IP Rating](/static/images/notes/IPRatingsforInstrulab.png)

General environmental protection standards include IEC 60529 and NEMA 250-1997 (National Electrical Manufacturers Association). The standards imply a basic protection from dangerous voltages (up to 1000V) and specify if the device should be used indoors or outdoors.

| Type | Description |
| :---: | :---: |
| 1 | Only for indoor use. Protection against dirt. | 
| 2 | Type 1 but additional dripping and slight splashing. | 
| 3 | Type 2 but additional rain, sleet, snow, ice and windblown dust. | 
| 3R | Type 3 but can be used outdoors. | 
| 3S | Type 3R but enclosure can be operated with ice. | 
| 4 | Type 3 but additional splashing and water jets. |
| 4X | Type 4 but additional corrosion. | 
| 5 | Indoor. Against settling dust, dripping, lint and fibers. | 
| 6 | Type 4 but additional immersion. | 
| 6P | Type 6 but additional submersion. | 
| 12 | Indoor. Against circulating dust, dripping, lint and fibers. | 
| 12K | Type 2 but additional conduit openings with cable glands. | 
| 13 | Type 5 but additional splashing, oil and corrosive coolants. | 

![NEMA Rating](/static/images/notes/NEMARatingsforInstrulab.png)
![Equivalent form](/static/images/notes/EquivalenceforRatingsInstrulab.png)

* [NEMA Ratings](https://www.nemaenclosures.com/media/pdf/NE-NEMA-vs-UL-012314.pdf)
* [IP Ratings](https://www.iec.ch/ip-ratings)

**Function Classification**

![Function Classification](/static/images/notes/FunctionClassificationInstrulab.png)

* Blind Instruments: Devices that have no visible indicator of the control value.
* Primary Sensor: Sensor or transducer used to get the initial signal.
* Transmitter: Transforms the input signal into a standard industrial format, for example  digital (pulses), pneumatic (3 to 15psi) or analogue (4-20mA, 0-20mA, 0-10V, -10-10V).
* Converter: Transforms a signal between pneumatic into electrical (P/I) or electrical into pneumatic (I/P).
* Receiver: Receive signals from a transmitter and indicate or record the measured values.
* Receiver-Controller: Receive the signals from the transmitter and output another signal that will be used by an actuator.
* Controller: Uses a target value (desired, setpoint) and a control variable to modify its output and activate an actuator.
* Final Actuator: Step between the controller and the sensing element in a feedback loop that is able to modify the control variable.

Process Variable include: Flow, Level, Pressure, Temperature, Density, Specific weight, Humidity, Viscosity, Position, Velocity, pH, Conductivity, Frequency and Force.

We can identify an instrument by combining every function it performs with its process variable, for example:

* Receiving Controlling Recorder of Flow.
* Controlling Recorder of Temperature.
* Receiving Indicator of Level.
* Blind Transmitter of Pressure.

**Instrument Identification ISA**

![LetterIdentification](/static/images/notes/LetterIdentificationISAInstrulab.png)

This combination of function and control variable is represented in the ANSI/ISA (Instrument Society of America) norm S5.1-84 or its equivalent DIN (Deutsches Institut für Normung) 19227

**Plant Diagram**

![PlantDiagram Symbols](/static/images/notes/PlantSymbolsISAInstrulab.jpg)

* Each instrument must have a tag number or alphanumeric code starting with the ISA instrument identification letters. For example: TE
* Next to the tag (in parallel or in series) it must specify the control loop number. For example: TE-25
* If a loop has more than one instrument of the same type they can be differentiated with numerical or character suffix. For example TE-25-1 or TE-25A
* If an instrument performs multiple functions they should be named:
	* FR-2 with PR-4 can be designated as FR-2/PR-4
	* PR-7 with PR-8 can be designated as PR-7/8
	* TAH-21 with TAL-21 can be designated as TAH/L-21
* If an instrument has any accessory (purge rotameters, pressure reducing filters, seal pots) they shouldn't be included in the plant diagram but can be identified using their associated instrument with a note at the end:
	* PI-8 can have a purge that will be identified as PI-8/PURGE

![Line Symbols](/static/images/notes/LineSymbolsusedISAInstrulab.png)

* Field instruments: Located inside the process or near it (tanks, pipelines, dryers, etc).
* Panel instruments: Mounted on panels, cabinets or similar enclosure and operated in an area that is isolated from the process.

Industry can be subdivided into discrete manufacturing (Cars, TVs, Celphones, etc), that uses distance sensors, conveying belts, robots and CNC machines or into continuous manufacturing (cement, food, drinks) that uses valves, flow, pressure controllers and controllers. Instrumentation diagrams are particularly useful to continuous manufacturing processes. 

**Piping and Instrumentation Diagram**

![Piping and I Diagram](/static/images/notes/PipingAndInstrumentationDiagramforIntru.png)

Piping and Instrumentation Diagrams (P&IDs) show the layout of all relevant vessels, pipes and machinery with their instruments superimposed, describing the flow of substances or data between components. Formally defined by the Institute of Instrumentation and Control as a diagram that shows the interconnection of equipment and instrumentation used to control the process using a standard set of symbols based on ISA standard S5.1.

It is used for construction and operation of a plant, maintenance and modification, physical sequence of equipment and systems and the development of system control schemes like HAZOP (Hazard and Operability Study). It can be thought as a pictorial representation of key piping and instruments, control and shutdown schemes, safety and regulatory requirements, start up and basic operational information.

To achieve its purpose it must provide the following data for engineers, construction teams and operators:

* Equipment: Tanks, vessels, heat exchangers, pumps, compressors, columns, etc. Indicating type, tags, design data, spare parts etc.
* Lines: Piping material class, size, fluid service, tags, insulation, thickness, operating pressure, temperature and flowrates.
* Piping Requirements: Slope, special insulation (heat tracing), piping distance requirements etc.
* Manually Opened Valves: Valve types (ball, gate, check), valve size, closed or open (locked, sealed, normally).
* Piping fittings: Flanges, reducers, expanders, spectacle blinds, spacers, strainers, along with their size.
* Drains and Vents: Indicated using typical symbols along with their size and type (single valve, double valve).
* Automated valves: Shutdown valves (SDV), control valves, blowdown valves (BDV), size, tags, fail position (Open/Close), actuators.
* Safety Valves: Pressure relief valves (PRV) or temperature relief valves (TRV) are indicated with their tags, setpoints and types.
* Instruments: Gauges, transmitters, indicators, DCS indicators, interlocks and other functions are shown in detail. 
	* Their interconnection is shown based on their type of signals (hardwired, soft, pneumatic, hydraulic). 
	* The location of the instruments (field mounted or DCS) is indicated by the distance between the symbols.
* Notes: Written to improve clarity. Hold is sometimes used to indicate uncertainty about a piece of data.
* Interconnections (OPC): Shown between lines (Piping) and instrument signals (Instrument) sheets. 
	* They can have unique tag for easy identification between diagrams. 

Because of the numerous details involved for every piece of equipment usually only one type is shown per diagram with its related piping and instruments.

***

# Optocouplers #

PC817 
led Y PHOTODIODO fotoresistor
El fotodiodo actua como un switch dejando pasar una fuente a una carga cuando el led emita luz
El metodo de fabricacion por fotolitografia se ocupa en la creacion de diodos y MEMS
FC 50mA

El 4N26 tiene una pata adicional que sirve de backup por si el diodo emisor se rompe podamos activar manualmente mediante otro switch el FOTOTRANSITOR con una conecicon a base
FC 60 mA
CC 50 mA

FORWARD CURRENT es el minimo de corriente que van a necesitar para funcionar, es decir la corriente que requiere el led para prenderse correctamente

COLLECTOR CURRENT es la corriente que el fototransitor puede suministrar a la carga extrerna 

HAY FOTOTRANSITOR, FOTOTRANSISTOR DARLINGTON (DC), TRIAC (AC) Y SRC (AC)

lOS Optotriac tambien tienen un diodo
MOC301X
El triac es un diodo de potencia MOSFET
Es necesario el triac en AC porque permite trabajar en ambas direcciones es bidireccional en cuanto a la carga output

Forward current max 60 mA
Input Forward voltage (at a temperature and current show typucal and maximum voltages for the LED)

Tambien muestra las corrientes de trigger para el LED dependiendo del modelo IFT entonces se recomienda que este entre estos dos valores

El OPTOTRIAC no debe ser utilizado para la carga directamente se debe utilizar un TRIAC auxiliar que va a conducir la carga de AC de un foco por ejemplo
Porque no puede suministrar la corriente

LAS CURVAS generalmente dependen de la temperatura en el datasheet





***

# Operational Amplifiers #

Es un amplificador con dos entradas, dos alimentaciones y una salida
Dispositivos lineales ideales para la amplificacione DC
Usados en acondicionamiento, filtrado y como comparadores.
El principio de retroalizmentacion negativa es fundamental para el control de procesos
En la configuracion de amplificador diferencial se amplifica la diferencia entre las tensiones de las entradas proporcionando una salida que no esta influida por cualquier voltaje comun entre ellas.

Vs = - R2 /R1 (V1-V2)
Con R1 y V1 en no inversor 
Con V2 en inversor

En el modelo ideal 
La ganancia en lazo abierto es infinita
El ancho de banda es infinito
La impedancia de entrada es infinita
La impedancia de salida es cero

Av = Vo/Vi (Ganancia Final)

Sin retroalimentacion (lazo abierto) Aplicacion no lineal.
Retroalimentacion positiva (Aplicacion en osciladores) Aplicacion no lineal-
Retroalimentacion negativa Aplicacion lineal.

El voltaje de salida maximo es el voltaje de entrada mas el 90 porciento del voltaje de entrada 

La relacion de rechazo de modo omun o CMRR queremos que sea pequeña ya que inidica que la ganancia es tal que no se dejaran pasar variaciones pequeñas como el ruido.

En un OP AMP ideal es 0 indicando que en un diferenciador con entradas iguales la salida sera cero, en la realidad en este msmo caso la salida tendra un pequeño votaje que corre el riesgo de ser amplificado por el circuito y terminar generando un offset indeseado.

La frecuencia de transicion es aquella frecuencia para entradas en corriente alterna en donde la ganancia que tienen debido al op amp sera unitaria.

Velocidad de subida o slew rate es que tan rapido la salida seguira a la entrada o si existira un desfazamiento entre ellas.

DIAGRAMAS

Inversor Y nO INVERSOR
Amplificador sumador inversor
Amlificador Diferencial.
Seguidor de voltaje
Integrador
Derivador
Amplificador de intrumentacion 
Amplificador inversor de audio

***

# Filters #




***

# Oscillators and Converters #

***

# Piping and Diagrams #

***

# LabView Filters #

***

# LabView DAQ #

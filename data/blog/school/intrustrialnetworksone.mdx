---
title: Industrial Networks 1
date: '2021-08-15'
tags: ['school', 'networks']
---

Designing industrial networks, characteristics, topologies, protocols and configuration of different network types. Implement networks used for programmable logic controllers, wiring and plant integration. Requires knowledge of automation and industrial computing.

***

# PLC #

A programmable logic controller, also known as a programmable automata, is a computer used in industrial automation as the controller inside control systems. It executes a set of instructions in an electromechanical process, for example an assembly line. Examples of PLC manufacturers are Siemens, Allen Bradley, Omron, Mitsubishi, Schneider, Zander Aachen and Crouzet.

![PLC Architecture](/static/images/notes/PLCArquitectureNetworks.png)

PLC's have a programming unit that translates code, a memory unit that stores the code, a CPU and a power unit. The CPU is an 8, 16 or 32 bit microprocessor capable of data logic, temporalization and sequencing, communicating using a modular I/O physical interface. By interpreting inputs and logic instructions it decides what to output at any given time. One important characteristic is how quickly its able to complete a SCAN cycle.

![PLC SCAN](/static/images/notes/PLCscancycleNetworks.png)

The memory unit is where the main program and all its relevant data is stored, they vary according to type and capacity for example ROM, RAM, PROM, EEPROM, etc. Normally memory is specified in K units where 1K represents 1024 words in the memory register. Most PLC's are manufactured for AC power sources but there are some models that accept DC power sources for example in offshore rig operations where DC generators are common. 

Voltage and current requirements, usually 120VAC, 220VAC or 24VDC, must be supplied to ensure the PLC will provide the correct input and output signals. PLC are preferred in industrial environments to other controllers for their simplicity, sturdiness and reliable Input and Output interface that is specifically designed to communicate with modules and instrumentation (sensors and actuators).

PLC's programming languages are used to create a program with the necessary control instructions, note that communication between PLC's happens through communication protocols like Profibus, Fieldbus, Modbus, Devicenet, Interbus, etc. Since PLC's are used by many professionals that don't have a programming background it is common to see high level graphic languages. 

Graphic languages use symbols to declare the instructions but are limited to the available symbol combinations, for example Ladder Logic (relay based) or Logical Symbol Blocks. Textual languages use character strings to declare the instructions therefore they are more flexible, for example Instruction List (Assembly based) or Structured Text Language (C and PASCAL based).

***

# Networks #

Communication is almost as important as any other vital resource. It creates a boundless world, global communities and information networks. Online services like mail, files and games are managed by specialized servers. Servers (HOSTS) will provide the information that a client (END DEVICE) asks for. Intermediary devices like routers connect the clients to the servers.

**Point to Point**

Point to point networks, like torrent, are networks where devices can act as clients and servers at the same time. This type of networks are easy to configure, less complex, reduce costs and are mainly used to transfer files or share other devices, however they aren't centralized, they are unsecure, not scalable and their performance depends on the available servers at any time.

**End Device and Intermediary Device**

![Network Topologies](/static/images/notes/NetworkTopologySymbolsNetworks.png)

An end device is a point in the network where a message can originate or be received, for example desktops, laptops, printers, IP Phones, tablets or smartphones. Messages can take different routes, independent of the end device, through intermediary elements that forward the information. Examples of intermediary elements are LAN switches, wireless routers, firewalls, routers and multilayer routers.

Intermediary elements don't store the information they forward but they do keep track of the flow of data to report errors, report communication failures, execute data management coordination and make the network more efficient overall. Information travels through mediums like copper (electrical impulses), glass fibers like optical fiber (light pulses) or wireless like air (frequency modulation of electromagnetic waves).

**Topologies**

![Network Topologies](/static/images/notes/TypesOfTopologiesNetworks.png)

Network topologies or diagrams represent the devices connected to a network using symbols. Devices need a NIC (Network Interface Controller) to interface into a physical network using their ports (device interfaces). Physical network topologies illustrate the placement of the devices and their wiring. Logical network topologies illustrate devices, ports and addressing schemes like IP.

**LAN and WAN**

Networks vary widely depending on their purpose and reach. Local area networks (LAN) are used to interconnect a small number of computers (fewer than a hundred) that are geographically close to each other (houses or small offices). Wide area networks (WAN) are used to interconnect a large number of computers (hundreds to thousands) that are geographically distant from each other (large companies or the internet). 

LAN and WAN abstractions will depend on the geographical area they encompass, the number of expected users, the quantity and services available and on how reliable is the network's infrastructure. LAN's will usually be managed by one person or organization providing high speed bandwidth to its devices while WAN's are generally managed by Internet Service Providers linking different LAN's.

**Intranet, Extranet and Internet**

The internet is a global collection of LAN's and WAN's using copper cables, optical fiber cables and wireless transmissions. The internet is not controlled by any person or group however there are several organizations dedicated to helping maintain its physical and logical structure like the ISOC, IAB, IESG, IRSG, IRTF and IETF. 

The intranet is a private collection of LAN's and WAN's accessible only to authorized members of an organization. The extranet is layer built on top of the intranet allowing controlled access to the intranet's data to people related to the organization like clients and collaborators. The internet is the public collection of LAN's and WAN's that everybody is authorized to access.

**ISP Services**

ISP's generally provide to homes and small offices the following services: Wired broadband (Cable), Digital subscriber line (DSL), Cellular network, Satellite or Dialing telephone. Entrepreneurial services include: Leased line, WAN Ethernet (Metro), SDSL or Satellite. Businesses used to be wired using separate telephone, video and data lines but today most services use convergent networks that transport data through a single line. 

**Reliable Architecture**

Every network architecture must meet the following expectations in order to be considered a *Reliable Network*:

* Tolerance to failures: Systems that decrease the impact of failures by limiting the number of affected devices, like redundancy.
* Scalability: The network can easily expand to admit new devices and applications without diminishing the overall performance.
* Quality of Service (QoS): Systems that prioritize workloads by considering the specific needs of the network users.
* Security: Divided into the safety of the infrastructure (physical) and the safety of the data (logical). Its main objectives are:
	* Confidentiality: Only the desired recipients can access the data.
	* Integrity: A guarantee that the data has not been compromised during transmission.
	* Availability: A guarantee that there is a reliable and timely access to the data.

**Network Trends**

There are many trends in today's networks including the bring your own device model (BYOD) where users want to be able to access their data on any device, anywhere. Online collaboration and videoconferences used in many companies and schools. Video communication as part of everyday life. Cloud computing allowing affordable access to computing power and storage by leasing distant cloud servers.

There are some technology trends too like intelligent homes interconnecting appliances, electric line network adapters that allow the use of the electric infrastructure as ethernet or wireless broadband that allow you to connect your devices to a general wireless internet tower (WISP) similar to the cellular network that smartphones use.

**Network Security**

Network protection includes protocols, technologies, devices, tools and techniques like firewalls, access control lists (ACL), intrusion prevention systems (IPS), and VPN's that mitigate external and internal threats. External threats can be viruses, trojan, worms, spyware, adware, zero day attacks, denial of service, data interception and identity theft. Internal threats can be lost or stolen devices, accidental misuse or malicious employees.

***

# Network OS #

**Operative System**

Operating systems are built on top of abstraction layers. The hardware is the physical layer that includes the electronic devices of the OS. The kernel is the software-hardware interface in charge of distributing resources. The shell is the software interface and it's the first layer meant for human intervention. Shells can have a text based (CLI) or graphic based (GUI) interface. 

The CLI is the preferred operating system for network technicians to configure, monitor and control devices. To access the network OS of a device we can use a Console (serial port), Telnet (unencrypted remote network access) or a secure shell (SSH). SSH stablishes an encrypted remote CLI virtual connection. Both Telnet and SSH generally use a terminal emulator such as PuTTY, Tera Term or SecureCRT.

| Command | Description | Switches |
| :---: | :---: | :---:|
| systeminfo | Get basic information about the device | None |
| hostname | Displays local device hostname | None |
| ping | Sends data packages to a host and waits for the echo response. | Use hostname or IP |
| ipconfig | Network information of the local device | All, release, renew, flushdns |
| tracert | Trace the route of a data packet | Test-NetConnection PS equivalent |

**Cisco IOS**

| Command | Description | Switches |
| :---: | :---: | :---:|
| enable | Enables privileged EXEC mode | - |
| disable | Exit privileged EXEC mode | - |
| configure | Enter global configuration mode | terminal |
| line | Enter line configuration mode | console 0 |
| interface | Enter interface or port configuration mode | vlan 0 |
| line vty 0 15 | Define VTY line password | 0 to 15 |
| exit | Exit configuration mode. Also to logout. | - |
| hostname | Configure the device hostname | - |
| password | Define a user password | - |
| enable secret | Define a privileged user password | - |
| login | Login to the device profile using its password | - |
| service password-encryption | Encrypt defined passwords | - |
| show running config | Verify password encryption | - |
| banner motd #string# | Add a terminal login banner | - |
| ip address ip | Define the device IP and subnet mask | ip subnetmask |
| no shutdown | It enables the status of the configured interface | - | 

* Startup-config: Configuration file stored in NVRAM containing the persistent device configuration.
* Running-config: Configuration file stored in RAM containing the volatile device configuration.

Use `copy running-config startup-config` to save the changes made into the running configuration. If the running configuration hasn't been saved you can undo everything with the command `reload`. If the configuration has been saved you could use `erase startup-config` instead. Use your terminal emulator session logging and the command `show running-config` to build a configuration file.

* [Commonly Used Commands](https://scadahacker.com/library/Documents/Cheat_Sheets/Networking%20%20-%20Cisco%20CCNA.pdf)
* [Configuration Fundamentals](https://www.cisco.com/c/en/us/td/docs/ios/fundamentals/command/reference/cf_book.pdf)
* [Configuration Command Reference](https://www.cisco.com/c/en/us/td/docs/ios-xml/ios/fundamentals/command/cf_command_ref.pdf)
* [Cisco IOS Reference](https://www.cisco.com/c/en/us/support/ios-nx-os-software/index.html)

**Ports and IP's**

![IP Headers](/static/images/notes/IPvfourandIPvsixHeadersNetworks.png)

We use IP addresses as way of locating devices inside a network, they can be configured manually or by using a dynamic service like DHCP. Currently there are two active IP standards: Version 4 and version 6. 

1. Version 4 uses a dotted decimal notation with 4 numbers between 0 and 255 making a 32 bit address. The default gateway address is the IP of the router used to access remote networks.
2. Version 6 uses 128 bit long addresses written in hexadecimal. Groups of 4 hexadecimal digits are separated by a colon. It is case insensitive. 

**Communication Protocol Rules**

Every communication protocol must have a source or sender, a destination or receiver and a channel or media. Protocols must define the message encoding, format, encapsulation, size, synchronization and delivery. Format is the structure applied prior to the encoding, it depends on the type of message and channel used. Delivery can be unicast (one to one), multicast (one to many) and broadcast (one for all), Broadcast is not available in IPv6, in this case we use Anycast as an alternative.

![Network Protocols](/static/images/notes/SendingAMessageProcessNetworks.png)

Message timing depends on:

* Flow control: Data transmission speed, how much data can be sent at the same time and how fast.
* Response timeout: How long a device waits for a response or confirmation (echo).
* Access Method: Set of rules that try to prevent collisions or establish recovery methods.

***

# Network OS #

**Protocols Used**

We use protocols so that the sender and receiver are properly identified, there is a guaranteed delivery, an efficient data flow, a continuous data sequence and data corruption detection. Protocols can work together through protocol suits like the internet (TCP/IP), most suits can be divided into their top layers (content) and lower layers (data flow).

![Internet Protocol Suit](/static/images/notes/TCPLayerdModelNetworks.png)

The IETF maintains the internet protocol suit, the ISO and ITU maintain the open systems interconnection protocol suit, Apple maintains its AppleTalk protocol suit and Novell maintains its Novell NetWare suit.

**Organizations**

* Internet Society (ISOC): Promotes open development and evolution of the internet.
* Internet Architecture Board (IAB): General development of the internet standards.
* Internet Engineering Task Force (IETF): Develop and update the internet protocol suit.
* Internet Research Task Force (IRTF): Long term research about the internet protocol suit.
* Electronic Industries Association (EIA): Standards of wiring, connectors and network racks.
* Institute of Electrical and Electronic Engineers (IEEE): New tech innovation standards.
* Telecommunications Industries Association (TIA): Standards for radio, towers, and satellite.
* Internet Corporation for Assigned Names and Numbers (ICANN): IP address assignments and domains.
* Internet Assigned Numbers Authority (IANA): IP assignments, domains and protocol identifiers.
* Telecom. Stand. Sector of the International Telecom. Union (ITUT): Video and TV over IP.

**Layer Suit Model**

![Network Protocols](/static/images/notes/StackLayeredModelsNetworks.png)

Network suits are usually complex therefore we use layer models like TCP/IP or OSI to compartmentalize their protocols. 

TCP/IP Layers:

1. Network access: Hardware connected to the network via their NIC's (wired or wireless).
2. Internet: Determines the best path through the network via Internet Protocol addressing.
3. Transport: Communication between devices over various networks via Transmission Control Protocol.
4. Application: User data and content including their encoding and decoding platform.

OSI Layers:

1. Physical: Activate and maintain physical connections. Timing and bit synchronization.
2. Data links: Exchanging data frames on a common medium using MAC addressing.
3. Network: Services for exchanging data portions over the network via IP addressing.
4. Transport: Segment, transfer and reassemble data into their predefined ports.
5. Session: Manage data exchange and provide services to the next layer.
6. Presentation: Common representation of the data transferred to the user.
7. Application: Contains protocols used for process intercommunication.

**Data Encapsulation**

Segmentation is dividing the data into smaller units, multiplexing is taking multiple streams of segmented data and weaving them together. Message sequencing, like the one done by TCP, is the process of numbering data segments so that they can be reassembled. We segment data to increase its transmission speed and efficiency since large amounts of data can be sent thought multiple routes and in the case of failures only a small amount of data has to be retransmitted. 

Encapsulation is how protocols add metainformation to data packages. Each stage of the process implicates the creation of a new protocol data unit, therefore we can subdivide the process by the PDU it creates at each stage (data, segment, package, plot or bits). In decapsulation data moves from the bottom to the top, removing their PDU headers.

**Data access**

![Local and Remote Access](/static/images/notes/LocalAndRemoteAddressingRoutingNetworks.png)

Source and destination IP addresses in the Network Layer (L3) are responsible for sending the IP packet from source to destination. Data links in the Data Link Layer (L2) are responsible for sending data link frames from one NIC to another NIC.

First PC1 sends a data frame from its NIC to its default gateway DGW interface (R1), then the router sends the frame to an additional router (R2) and finally the last router sends the frame to the NIC of its original destination a Web Server. For remote data access we can see that the local addressing via MAC addresses (L2 Header) changes every hop but the remote addressing via IP addresses (L3 Header) remains intact.

***

# Physical Layer #

**First Layer**

Before any network communication can occur a physical connection to the local network must be established. The wired or wireless Network Interface Card is used to make this connection. It accepts an entire data frame and encodes it before sending it to the next device. Standards relating to this layer are implemented in hardware and therefore are managed by many organizations (ISO, ANSI, IEEE) while the rest of the TCP/IP stack is implemented in software and managed by the IETF.

![Encoding Media](/static/images/notes/EncodingOfDifferentMediaNetworks.png)

The physical layer standard defines the physical components, coding and signaling needed for communication between devices. Physical components include NICs, interfaces, connectors and cables. There is a necessary encoding stage where a bit stream is translated into a recognizable signal by the following NIC, for example the Manchester encoding 4B/5B or 8B/10B. The signaling defines what will be considered 1 or 0 and it depends on the medium (wireless, optic fiber, cable).

![FSK ASK PSK QAM](/static/images/notes/DigitalModulationMediumAirNetworks.png)

Latency is the amount of time, including delays, for data to travel from one device to another. Performance is a measure of how many bits are transferred over a period of time. Useful transfer capacity is a measure of how many useful bits are transferred over a period of time. Performance will be heavily dependent on the technology used and the medium's bandwidth, its fundamental unit is 1 bit per second (1 bps).

**Copper Wiring**

Copper wiring is the most common type used as it is inexpensive, easy to install and has a low resistance. Its main drawbacks are its attenuation over long distances and its susceptibility to Electromagnetic Interference (EMI), Radio Frequency Interference (RFI) and Crosstalk. Its drawbacks can be mitigate using wire length limits, metallic shielding, grounding and twisting opposing pair cables together for Crosstalk.

![Copper Wiring](/static/images/notes/UTPConnectorWiringNetworks.png)

Unshielded Twisted Pair Cable (UTP) is the most common, it ends in RJ-45 connectors. Usually used as a medium between an end device to an intermediary device. Twisted pairs mitigate interference, color coding identifies the opposing pairs. Note that twisted pairs are twisted at different rates to avoid interference between them. Follows TIA/EIA 568 and IEEE copper wiring standards.

![Copper Wiring Two](/static/images/notes/CopperConnectorWiringNetworks.png)

Shielded Twisted Pair Cable (STP) has better noise protection than UTP but its expensive and more difficult to install, it ends in RJ-45 connectors. Usually used as a medium between an end device to an intermediary device. Braided shield and individual pair aluminum shield provides EMI and RFI protection. Twisted pairs mitigate interference, color coding identifies the opposing pairs.

Coaxial cable has a woven copper braid that act both as a shield and a second wire in the circuit. It protects the inner copper conductor in a flexible plastic insulator. It ends in BNC, N type or F type connectors. Usually used in wireless installations and wired internet services.

**Fiber Optic**

More expensive than UTP but ideal for some networking scenarios. Lowest attenuation and completely immune to EMI and RFI. Made from flexible and extremely thin glass strands. uses lasers to encode bits as light pulses. Used in enterprise networks, fiber to the home (FTTH), long distance networks and international submarine cable networks.

![Fiber Optic](/static/images/notes/FiberOpticWiringForNetworks.png)

Single mode fiber (SMF) has a small core (9 microns) and a glass cladding of 125 microns in diameter, uses expensive lasers and has long distance applications. Multiple mode fiber (MMF) has a larger core (50 to 62.5 microns) and uses low cost lasers or LEDs however because of light scattering MMF has a maximum range of 550 m for a 10 Gbps bandwidth.

**Wireless**

It uses the air to propagate electromagnetic signals that represent binary digits. This technology provides the best mobility option but it has a limited coverage, is susceptible to interference, it is less secure and its bandwidth is reduced significantly with multiple users. Standards made by the IEEE and the telecom industry cover both the physical and data link layers. 

* Wi-Fi (IEEE 802.11): Wireless LAN (WLAN) requiring an access point (AP) and a NIC adapter.
* Bluetooth (IEEE 802.15): Wireless Personal Area Network (WPAN) standard.
* WiMAX (IEEE 802.16): Point to multipoint topology to provide broadband wireless access.
* Zigbee (IEEE 802.15.4): Low data and power consumption, used in IoT aplications.

***

# Numbering System #

![Numbering Systems](/static/images/notes/NumberingSystemsBinaryHexNetworks.png)

A binary numbering system is used for IPv4 addresses. Hosts, servers and network devices that use IPv4 identify between themselves by a unique 32 bit string divided into 4 octets (bytes). Generally this binary dotted notation is represented in its decimal format. Another hexadecimal numbering system is used for IPv6 and MAC addresses, it represents a 128 bit string divided into hextets.

***

# Data Link Layer #

**Second Layer**

![Second Layer](/static/images/notes/DataLinkLayerBasicNetworks.png)

This layer communicates the end devices NIC's, it encapsulates layer 3 packets (IPv4 and IPv6) in layer 2 data frames, therefore it's the gate through which higher level layers are able to access the physical layer.It also performs the first series of error detection rejecting corrupted data frames.  Depending on the physical medium it will use different IEEE 802 LAN/MAN sublayer standards.

Its main sublayers are the Logical Link Control (LLC 802.2) and the Media Access Control (MAC 802.3, 802.11 or 802.15). The LCC identifies the network protocol used and communicates between the network software and the device hardware. The MAC is responsible for the overall encapsulation, media access control and data link addressing. 

The data link layer is mainly responsible for accepting a data frame from the network, exposing the encapsulated packet, re-encapsulating it in a new frame and forwarding the new data frame. There are many organizations that create data link layer standards including: Institute for Electrical and Electronic Engineers (IEEE), International Telecommunications Union (ITU), International Organizations for Standardization (ISO) and the American National Standards Institute (ANSI).

**Topologies**

![Data Link Topologies](/static/images/notes/DataLinkLayerTopologiesNetworks.png)

Physical WAN topologies include: Point to Point (Permanent and Unique Node Link), Hub and Spoke (Central node interconnects branches) and Mesh (High availability but each node needs a connection to every other node). The Hub and Spoke variation called Extended Star topology is widely used since it is easy to install, highly scalable and easy to troubleshoot.

Early Ethernet and Legacy Token Ring protocols provided the Bus (Nodes chained together in a line) and Ring (Nodes connected to their neighbors) topologies. WLAN and Legacy Bus (Ethernet Hubs) implemented half duplex communication that only allows one device to send or receive data at a time. Today Ethernet Switches implement full duplex communication that allows both devices to send and receive data at a time.

**Access Control Methods**

We can device the access control into Containment Based or Controlled Based. In Controlled Based Access every node has its own dedicated time to transmit data, it is a deterministic access used in legacy networks such as Token Rings and ARCNET. In a Containment Based Access every node is operating in half duplex (only one device sends or receives at a time), meaning that they compete for the medium's resources.

Examples of Containment Based Access technology include Carrier Sense Multiple Access Collision Detection (CSMA/CD) mainly used in legacy bus Ethernet LAN's or Carrier Sense Multiple Access Collision Avoidance(CSMA/CD) mainly used in IEEE 802.11 WLAN's. 

CSMA/CD uses a collision detection process by detecting a collision and notifying the rest of the nodes so that the culprits wait a random period of time before they relay the data. CSMA/CA uses a collision avoidance process by including the length of time needed for their transmission while other devices use this information to wait as the network is currently unavailable.

**Link Header and Trailer**

![Header and Trailer](/static/images/notes/DataLinkHeaderandTrailerNetworks.png)

In this layer the data is encapsulated with a header and a trailer forming a data frame. The specific header and trailer used and the amount of control information they carry will vary depending on the data link protocol, the access control and the logical topology. The general header and trailer fields are:

| Field | Description | 
| :---: | :---: |
| Link Start and Stop | Identifies the beginning and ending of the link |
| Addressing | Indicates source and destination nodes |
| Type | Identifies the L3 encapsulation protocol |
| Control | Identifies flow control services needed |
| Data | Contains the frame payload |
| Error Detection | Used to determine transmission errors |

Note that this layer uses physical addresses when forwarding data links. The MAC addresses are included in the header and are updated every time a new device forwards the data. In the end the logical topology and network media will determine the data link protocol: Ethernet, 802.11 Wireless, Point to Point PPP, Frame Relay, High-Level Data Link Control HDLC, etc.

***

# Ethernet Switching #

The Ethernet protocol works at both the physical and the data link layer. It is a family of network technologies defined in 802.2 and 802.3 that create Ethernet data frames. Like other similar data link protocols it uses the LCC and MAC sublayers to work.

**Ethernet Frame**

![Mac Sublayer](/static/images/notes/MACSublayerEthernetFrameNetworks.png)

The data encapsulation done by the MAC sublayer (802.3) when using Ethernet creates Ethernet frames (internal structure), Ethernet addressing (MAC source and destination) and Ethernet error detection (Frame Check Sequence FCS Trailer). Every Ethernet frame is expected to come from an Ethernet NIC into another Ethernet NIC inside the same LAN.

**Topologies and Media Access**

The 802.3 MAC sublayer specifies Ethernet standards over various types of media and topologies. Legacy Ethernet uses Bus or Hub topologies (half duplex) with access control via CSMA/CD or contention based access. Today's Ethernet Switches in LANs operate in full duplex without access control.

![MAC Ethernet](/static/images/notes/MACAddressEthernetHeaderNetworks.png)

An Ethernet MAC address is a 48 bit string expressed as 12 hex digits, since its usually transferred in bytes it can be represented in hex as the range 00 to FF. Leading zeros in the hex pair are always displayed and they are normally prefixed by 0x, suffixed by H or include the subscript 16.

In an Ethernet LAN every device shares the same media and they are differentiated by their MAC at the data link layer. To ensure that every device has a unique MAC every Ethernet NIC manufacturer must register with the IEEE to obtain their starting 24 bit MAC, this string is called the Organization Unique Identifier (OUI).

![Frame Processing](/static/images/notes/FrameProcessingandNICsNetworks.png)

When a device forwards data through Ethernet the Frame Header will include the source and destination MACs. When a NIC receives an Ethernet frame it will examine its header to see if it matches its physical MAC address stored in RAM, if it's a match it will send the frame to the next OSI layers for decapsulation.

**MAC Address Types**

Ethernet NICs will also accept frames if the MAC address destination corresponds to a broadcast or multicast group of which the destination is a member. Different MAC addresses are used depending on the communications method (unicast, broadcast, multicast) of the data link layer.

![Communications Method](/static/images/notes/MACCommunicationsMethodTypeNetworks.png)

Unicast MACs are unique addresses used when sending a frame from a single device to a single destination. The process used by the source to determine the destination MAC associated with a particular IPv4 address is known as the Address Resolution Protocol (ARP) and for IPv6 its the Neighbor Discovery (ND) protocol. Note that source MAC addresses must be always unicast MACs.

Broadcast MACs like `FF-FF-FF-FF-FF-FF` will send the Ethernet frame to every device on the LAN (broadcast domain) flooding every port of the Ethernet Switch (except the incoming port). This frames won't be forwarded by any router in the LAN. Similarly if the encapsulated data is a broadcast IPv4 packet like `255.255.255.255` in the end it will be sent to every device in the local area network.

Multicast MACs will send the Ethernet frame to a particular multicast group (host group). If the encapsulated data is IPv4 multicast then de MAC address will be `01-00-5E` and `33-33` for IPv6 multicast packets. If the data is not IP like in the Spanning Tree Protocol other Multicast MACs may be used. Like in broadcast, unless the devices are configured otherwise, the frame will flood every single port. 

**MAC Address Table**

Every Ethernet Switch has a MAC address table on their data link layer that it uses to forward Ethernet frames. The switch doesn't take into account the data or the data protocol (IPv4 ARP packet or IPv6 ND packet) just the Ethernet MAC addresses when forwarding data. 

Switches must examine their MAC table for every frame unlike Legacy Ethernet Hubs that forwarded the data on every available port except the incoming port. The table is empty when the switch is powered for the first time and it fills as new devices are connected to it. It is also called the Content Addressable Memory (CAM) table.

![Frame Filtering](/static/images/notes/MACAddressTableSwitchesNetworks.png)

Every frame entering an Ethernet Switch is reviewed by examining the source MAC and the incoming port, if this MAC doesn't exist it is added to the table with the port number as its ID. If the source MAC was previously added the Switch simply updates the update timer for that entry (most switches keep the entry only for five minutes). By populating this table it will know exactly to which port it must forward the frame (unicast).

**Switch Forwarding**

The speed and method to forward data depend on the specific devices. Store and Forward Switching is where it receives a frame and ensures its valid, if it passes the CRC check the switch looks at the destination MAC and determines the appropriate exit interface, this decreases frame corruption and bandwidth reduction due to corrupt data. It can be used in QoS analysis for traffic priority frame classification.

Cut Off Switching forwards the frame before being fully received. This method decreases latency but is prone to more frame errors, it can be divided into Fast Forward Switching (Forward as soon as MAC is resolved), where its up to the destination NIC to drop faulty packets, and Fragmentless Switching (First 64 byte check), where it at least ensures that no collision occurred before it forwards the frame.

Frames can be buffered before forwarding or if the destination port is busy due to data congestion. Frame buffering methods include: Port Based Memory where frames are stored in queues bind to individual ports, the frame is transmitted when every previous frame has being successfully transmitted, note that a single frame can delay the whole queue in a port. 

In shared based memory ports share a common frame buffer, the memory of the buffers is dynamically allocated and the frames themselves are dynamically bound to their destination ports. This method allows for larger frame transmission with fewer abandoned frames which is important for asymmetric switching (different data rates per port), meaning that some ports can have dedicated bandwidth priority.

![Duplex Mismatch](/static/images/notes/DuplexMismatchSwitchesNetworks.png)

When switches communicate their port's bandwidth (speed) and duplex setting (half or full) must match. The auto-negotiation feature allows the switches to configure their ports. Note that Gigabit Ethernet only works on properly configured full duplex ports. Duplex and crossover mismatch are common causes of performance issues on Ethernet links. Note that direct router-host connections must be done in crossover cables, that is why today most switches support auto media dependent crossover (Auto-MDIX).

***

# Network Layer #

**Third Layer**

![Network Layer](/static/images/notes/NetworkLayerorIPProtocolNetworks.png)

The network layer is the communications protocol that allows end devices to exchange data like IPv4 and IPv6. This layer is responsible for terminal addressing, encapsulation, *routing* and decapsulation. It encapsulates the transport layer segment in IP packets that will be examined by every device in the network. 

![Characteristics Network](/static/images/notes/NetworkLayerCharacteristicsNetworks.png)

In theory IPs don't change continuously like MAC's, but due to a recent lack of public IPs the addressing can change via NAT service. IP addressing is intended to have low overhead, meaning that it was designed to work connectionless, minimal or best effort and independent of the media used.

IP is connectionless because it doesn't establish any connection before sending the packet, therefore it doesn't require any control information (synchronization, confirmation). It assummes that the destination will receive the packet some time in the future. Connection oriented traffic is expected to be handled in the transport layer, usually by TCP.

IP is minimal or best effort since it won't guarantee the delivery of the packet and it doesn't know the state of the destination device. It is media independent meaning that it sends the data equally through every media (doesn't interact with the physical or data link layers). In short it is unreliable, can't fix undelivered or corrupt packages and cannot retransmit after failure.

**Transmission Unit**

This layer stablishes the Maximum Transmission Unit (MTU) based on the control information sent by the Data Link layer. From this unit IPv4 will determine the MTU size and fragment the packets into smaller units, this processes will inevitably increases latency (for example if the packet goes from Ethernet to a WAN with a smaller MTU), in contrast IPv6 doesn't fragment its packets.

![IPv4 and IPv6](/static/images/notes/IPV4andIPV6CharactNetworks.png)

**IPv4 Packet**

The header ensures that the package is sent to the correct destination, contains network layer processing information and its used by every device that needs to handle the packet. It is written in binary, is read from left to right (4 bytes per line) and includes various information fields such as:

| Function | Description |
| :---: | :---: |
| Version | For v4 it is the 4 bit string 0100 |
| Differentiated services | Used for QoS (DiffServ-DS) or (IntServ - ToS) |
| Header Checksum | Detect IPv4 Header Corruption |
| Time to Live TTL | Hop Count. If zero the router drops the packet |
| Internet | Protocol ID for the transport layer (TCP, UDP, ICMP) |
| Source | IPv4 32 bit source address |
| Destination | IPv4 32 bit destination address |

**IPv6 Packet**

IPv4 has become obsolete because of address depletion (we can't assign new addresses), lack of end to end connectivity (private addresses and NAT overhead) and increased complexity (NAT modifies IPs and increases latency). IPv6 was developed to overcome IPv4 limitations with a larger address space (128 bit), improved packet handling (simplified header) and eliminates the need for NAT. IPv6 header is simpler but not smaller (40 Bytes) with fewer fields such as:

| Function | Description |
| :---: | :---: |
| Version | For v6 it is the 4 bit string 0110 |
| Traffic class | Used for QoS (DiffServ-DS)|
| Stream Label | Handle identical stream labels equally (20 bit) |
| Payload length | Indicates data length (16 bit) |
| Next Header | Protocol ID for the transport layer (TCP, UDP, ICMP) |
| Hop Limit | Replaces the hop count TTL |
| Source | IPv4 128 bit source address |
| Destination | IPv4 128 bit destination address |

IPv6 was also designed to contain extension headers (EH) between the header and the payload, they provide additional network layer information that can be used for security, custom fragmentation, mobility support etc.

**Host Routing**

![Host Routing](/static/images/notes/HostRoutingIPProtocolNetworks.png)

Packages are created at the source, each host has its own routing table and can send packets to itself `127.0.0.1` IPv4 or `::1` IPv6. Local hosts only change their last byte between them but are completely changed when communicating with remote hosts. The source will determine if the destination is local or remote, in IPv4 it will use its own IP, subnet mask and destination IP, in IPv6 it will use the network address and prefix given by the local router.

![Default DGW](/static/images/notes/DefaultGatewayIPProtocolNetworks.png)

If the destination is remote the traffic will be disconnected from the host interface to be handled by an intermediary device, if the destination is remote the traffic is forwarded directly to the default gateway router. A network layer switch or router can be configured to be the default gateway (DGW) of a LAN. Default gateways must have an IP in the same range as the rest of the LAN, they can accept LAN data and forward it to other routers (networks). 

![Routing Tables](/static/images/notes/RoutingTablesIPProtocolNetworks.png)

If a LAN device doesn't have a DGW or has configured a wrong DGW it won't be able to send data outside the LAN. The source can know its DGW statically or via a DHCP service on IPv4, on IPv6 it can request a router (RS) to be the DGW. Generally DGW routers will be the last entry in the host routing table. To obtain the routing table of a PC in Windows use the command `route print` or `netstat -r`. 

![Routing the Data](/static/images/notes/RoutingTablesTwoIPProtocolNetworks.png)

When the router receives the frame from the host it will use its own routing table to decide how to forward it. As said before if it is a local destination it will use a direct route, added automatically (port identified), if it's remote the route will be manual (static), dynamic (shared) or default (no match in the current routing table). 

![Show IP command](/static/images/notes/ShowIPCommandTableRouteNetworks.png)

The command `show ip route` displays the route types:

* L is a route directly connected to a local IP.
* C is a direct connection network.
* Y is a static route manually configured.
* O is an OSPF remote route.
* D is an EIGRP remote route.
* S or * is the default route.

### A note about IPs ###

Suppose you have a local IP address `192.168.0.0/16` where the 16 means it has a B class subnet mask `255.255.0.0` (2 Host bytes). The subnet masks will determine how many bytes of the IP refer to the Host and how many refer to the LAN. Other subnet masks include A `255.0.0.0` (3 Host bytes) and B `255.255.255.0` (1 Host bytes). The number of host bytes will determine the number of computers that the LAN can have in its network. Note that two of this IP addresses are already asigned, one is the name of your network `192.168.0.0` (Network ID) and the other will be the Broadcast IP `192.168.255.255`.

If you have a particular number of hosts that need to be included in a network ID then you must adjust the subnet mask bits with the power of two that includes that number of hosts. For example if you have the network ID `192.168.0.0` and need to fit 320 hosts then your subnet maskt will be $2^9 = 512 > 320$ or `255.255.254.0` that is equivalent to `11111111.11111111.11111110.00000000` (9 zeros) represented as `192.168.0.0/23`.

***

# Address Resolution #


Module 9: 
9.1 MAC and IP
Destination MAC and IP on the same network
There are two main addresses assigned to a device on an Ethernet LAN:
Layer 2 physical address (the MAC address): - used for NIC-to-NIC communications on the same Ethernet network.
Layer 3 logical address (the IP address): - Used to send the packet from the source device to the destination device.
Layer 2 addresses are used to deliver frames from one NIC to another NIC on the same network. If a destination IP address is on the same network, the destination MAC address will be that of the destination device.
Destination MAC and IP on a remote network
When the destination IP address is on a remote network, the destination MAC address is that of the default gateway.
IPv4 uses ARP to associate the IPv4 address of a device with the MAC address of the device's NIC.
IPv6 uses ICMPv6 to associate the IPv6 address of a device with the MAC address of the device's NIC.

9.2 ARP
ARP ARP Overview
A device uses ARP to determine the destination MAC address of a local device when it knows its IPv4 address.

ARP provides two basic functions:
Resolution of IPv4 addresses to MAC addresses
Maintaining an ARP Table of IPv4 to MAC Address Mappings

ARP ARP functions
To send a frame, a device will look in its ARP table for a destination IPv4 address and a corresponding MAC address.
If the destination IPv4 address of the packet is on the same network, the device will look in the ARP table for the destination IPv4 address.
If the destination IPv4 address is on a different network, the device will look in the ARP table for the IPv4 address of the default gateway.
If the device finds the IPv4 address, the corresponding MAC address is used as the destination MAC address of the frame.
If no entry is found in the ARP table, the device sends an ARP request.

ARP Removing entries from an ARP table

ARP table entries are not permanent and are removed when an ARP cache timer expires after a specified period of time.
The duration of the ARP cache timer differs depending on the operating system.
ARP table entries can also be removed manually by the administrator

ARP ARP tables on network devices

The show ip arp command displays the ARP table on a Cisco router.
The arp â€”a command displays the ARP table on a Windows 10 computer.

ARP ARP problems - ARP broadcasting and ARP spoofing

ARP requests are received and processed by every device on the local network.
Excessive ARP emissions can cause some reduction in performance.
ARP responses can be spoofed by a threat actor to perform an ARP poisoning attack.
Enterprise-grade switches include mitigation techniques to protect against ARP attacks.

9.3 Copper wiring
IPv6 Neighbor Discovery IPv6 Neighbor Discovery Messages
The IPv6 Neighbor Discovery (ND) protocol provides:
Address resolution
Router Discovery
Redirection services
ICMPv6 Neighbor Request (NS) and Neighbor Advertisement (NA) messages are used for device-to-device messages, such as address resolution.
ICMTPV6 Router Solicitation (RS) and Router Advertisement (RA) messages are used for messaging between devices and routers for router discovery.
Routers use ICMPv6 redirect messages for better next-hop selection.

IPv6 Neighbor Discovery IPv6 Neighbor Discovery - Address Resolution
IPv6 devices use ND to resolve the MAC address of a known IPv6 address.
ICMPv6 neighbor request messages are sent using special Ethernet and IPv6 multicast addresses.








***

# Router Configuration #




Module 10: Basic Router Configuration

10.1 Configure initial router settings


Set the device name.
Protect privileged EXEC mode.
Protect user EXEC mode
Protect remote access by Telnet and SSH
Encrypt all unencrypted passwords.
Provide legal notice and save settings.


Router (config) # hostname hostname
Router (config) # enable secret password
Router (config) # line console 0
Router (configuration line) # password
Router (config-line) # login
Router (config) # line vty 0 4
Router (config-line) # password password
Router (config-line) # login
Router (config-line) # transport input {ssh | telnet}
Router (config) # service password encryption
Router (config) # banner motd # message #
Router (config) # end
Router # copy running-config startup-config

Basic router configuration commands
The configuration is saved in NVRAM.


R1 (config) # hostname R1
R1 (config) # enable secret class
R1 (config) # line console 0
R1 (config-line) # password cisco
R1 (config-line) # login
R1 (config-line) # line vty 0 4
R1 (config-line) # password cisco
R1 (config-line) # login
R1 (config-line) # transport input ssh telnet
R1 (config-line) # exit
R1 (config) # service password encryption
R1 (config) # banner motd #
Write a text message. It ends with a new line and the #
***********************************************
WARNING: Unauthorized access is prohibited!
**********************************************
R1 (config) # exit
R1 # copy running-config startup-config

Configuring a router interface includes running the following commands:
It is recommended to use the description command to add information about the network connected to the interface.
The no shutdown command activates the interface.


Router (config) # interface type-and-number Router (config-if) # description description-text Router (config-if) # ip address ipv4-address subnet-mask Router (config-if) # ipv6 address ipv6-address / prefix-length Router (config-if) # no shutdown

The commands to configure the G0 / 0/0 interface on R1 are shown here:

R1 (config) # interface gigabitEthernet 0/0/0
R1 (config-if) # description link to LAN
R1 (config-if) # ip address 192.168.10.1 255.255.255.0
R1 (config-if) # ipv6 address 2001: db8: acad: 10:: 1/64
R1 (config-if) # no shutdown
R1 (config-if) # exit
R1 (config) #
* Aug 1 01: 43: 53.435:% LINK-3-UPDOWN: Interface GigabitEthernet0 / 0/0, changed state to down
* Aug 1 01: 43: 56.447:% LINK-3-UPDOWN: Interface GigabitEthernet0 / 0/0, changed state to up
* Aug 1 01: 43: 57.447:% LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0 / 0/0, changed state to up

The commands to configure the G0 / 0/1 interface on R1 are shown here:


R1 (config) # interface gigabitEthernet 0/0/1
R1 (config-if) # description Link to R2
R1 (config-if) # ip address 209.165.200.225 255.255.255.252
R1 (config-if) # ipv6 address 2001: db8: feed: 224:: 1/64
R1 (config-if) # no shutdown
R1 (config-if) # exit
R1 (config) #
* Aug 1 01:46:29 .170:% LINK-3-UPDOWN: GigabiteThernet0 / 0/1 interface, status changed to inactive
* Aug 1 01: 46: 32.171:% LINK-3-UPDOWN: Interface GigabitEthernet0 / 0/1, changed state to up
* Aug 1 01: 46: 33.171:% LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0 / 0/1, changed state to up


To verify the interface configuration, use the show ip interface brief and show ipv6 interface brief commands shown here:


R1 # show ip interface brief
Interface IP-Address OK? Method Status Protocol
GigabitEthernet0 / 0/0 192.168.10.1 YES manual up up
GigabiteThernet0 / 0/1 209.165.200.225 YES manual up up
Vlan1 unassigned YES unset administratively down down

R1 # show ipv6 interface brief
GigabitEthernet0 / 0/0 [up / up]
    FE80 :: 201: C9FF: FE89: 4501
    2001: DB8: ACAD: 10 :: 1
GigabitEthernet0 / 0/1 [up / up]
    FE80 :: 201: C9FF: FE89: 4502
    2001: DB8: FEED: 224 :: 1
Vlan1 [administratively down / down]
    unassigned
R1 #

The table summarizes the most popular commands used to verify the interface configuration.

Commands Description
show ip interface brief
show ipv6 interface brief The output shows all interfaces, their IPv4 addresses, and current status.
show ip route
show ipv6 route Displays the contents of the IP routing tables stored in RAM.
show interfaces This command shows statistics for all interfaces on the device. It only shows the IPv4 address information.
show ip interfaces Displays IPv4 statistics for all interfaces on a router.
show ipv6 interfaces Displays IPv6 statistics for all interfaces on a router.

View the status of all interfaces with the show ip interface brief and show ipv6 interface brief commands, shown here:
R1# show ip interface brief
Â¿Interface IP-Address OK? Method Status Protocol 
GigabitEthernet0/0/0 192.168.10.1 YES manual up up 
GigabiteThernet0/0/1 209.165.200.225 YES manual up up 
Vlan1 unassigned YES unset administratively down down 
R1#

R1# show ipv6 interface brief
GigabitEthernet0/0/0 [up/up]
    FE80: :201:C9FF:FE 89:4501
    2001:DB8:ACAD:10: :1
GigabitEthernet0/0/1 [up/up]
    FE80: :201:C9FF:FE 89:4502
    2001:DB8:ALIMENTACIÃ“N:224: :1
Vlan1 [administratively down/down]
    unassigned 
R1#

Display the contents of the IP routing tables with the show ip route and show ipv6 route commands as shown below:

R1 # show ip route

Gateway of last resort is not set
      192.168.10.0/24 is variably subnetted, 2 subnets, 2 masks
C 192.168.10.0/24 is directly connected, GigabitEthernet0 / 0/0
L 192.168.10.1/32 is directly connected, GigabitEthernet0 / 0/0
      209.165.200.0/24 is variably subnetted, 2 subnets, 2 masks
C 209.165.200.224/30 is directly connected, GigabitEthernet0 / 0/1
L 209.165.200.225/32 is directly connected, GigabitEthernet0 / 0/1
R1 #

R1 # show ipv6 route
C 2001: DB8: ACAD: 10:: / 64 [0/0]
     via GigabitEthernet0 / 0/0, directly connected
L 2001: DB8: ACAD: 10:: 1/128 [0/0]
     via GigabitEthernet0 / 0/0, receive
C 2001: DB8: FEED: 224:: / 64 [0/0]
     via GigabitEthernet0 / 0/1, directly connected
L 2001: DB8: POWER: 224:: 1/128 [0/0]
     via GigabitEthernet0 / 0/1, receive
L FF00 :: / 8 [0/0]
     via Null0, receive
R1 #

Show statistics for all interfaces with the show interfaces command, as shown below:

R1 # show interfaces gig0 / 0/0
GigabitEthernet0 / 0/0 is up, line protocol is up
  Hardware is ISR4321-2x1GE, address is a0e0.af0d.e140 (bia a0e0.af0d.e140)
  Description: Link to LAN
  Internet address is 192.168.10.1/24
  MTU 1500 bytes, BW 100000 Kbit / sec, DLY 100 usec,
     reliability 255/255, txload 1/255, rxload 1/255
  Encapsulation ARPA, loopback not set
  Keepalive not supported
  Full Duplex, 100Mbps, link type is auto, media type is RJ45
  output flow-control is off, input flow-control is off
  ARP type: ARPA, ARP Timeout 04:00:00
  Last input 00:00:01, output 00:00:35, output hang never
  Last clearing of "show interface" counters never
  Input queue: 0/375/0/0 (size / max / drops / flushes); Total output drops: 0
  Queueing strategy: fifo
  Output queue: 0/40 (size / max)
  5 minute input rate 0 bits / sec, 0 packets / sec
  5 minute output rate 0 bits / sec, 0 packets / sec
     1180 packets input, 109486 bytes, 0 no buffer
     Received 84 broadcasts (0 IP multicasts)
     0 runts, 0 giants, 0 throttles

Display the IPv4 statistics for the router interfaces with the show ip interface command, as shown below:

R1 # show ip interface g0 / 0/0
GigabitEthernet0 / 0/0 is up, line protocol is up
  Internet address is 192.168.10.1/24
  Broadcast address is 255.255.255.255
  Address determined by setup command
  MTU is 1500 bytes
  Helper address is not set
  Directed broadcast forwarding is disabled
  Outgoing access list is not set
  Outgoing access list is not set
  Inbound Common access list is not set
  Inbound access list is not set
  Proxy ARP is enabled
  Local Proxy ARP is disabled
  Security level is default
  Split horizon is enabled
  ICMP redirects are always sent
  ICMP unreachables are always sent
  ICMP mask replies are never sent
  IP fast switching is enabled
  IP Flow switching is disabled
R1 #


Display the IPv6 statistics for the router interfaces with the show ipv6 interface command shown here:

R1 # show ipv6 interface g0 / 0/0
GigabitEthernet0 / 0/0 is up, line protocol is up
  IPv6 is enabled, link-local address is FE80 :: 868A: 8DFF: FE44: 49B0
  No Virtual link-local address (es):
  Description: Link to LAN
  Global unicast address (es):
    2001: DB8: ACAD: 10:: 1, Subnet is 2001: DB8: ACAD: 10:: / 64
  Joined group address (es):
    FF02 :: 1
    FF02 :: 1: FF00: 1
    FF02 :: 1: FF44: 49B0
  MTU is 1500 bytes
  ICMP error messages limited to one every 100 milliseconds
  ICMP redirects are enabled
  ICMP unreachables are sent
  ND DAD is enabled, number of DAD attempts: 1
  ND reachable time is 30000 milliseconds (using 30000)
  ND NS retransmit interval is 1000 milliseconds

R1 #

10.3 Setting the default gateway

Configure the default gateway Default gateway on a host

The default gateway is used when a host sends a packet to a device on another network.
In general, the default gateway address is the address of the router interface connected to the host's local network.
To reach PC3, PC1 directs a packet with the IPv4 address of PC3, but forwards the packet to its default gateway, the G0 / 0/0 interface of R1.
Note: The IP address of the host device and the router interface address must be on the same network.

Configure the default gateway Default gateway on a switch

A switch must have a default gateway address configured to manage the switch remotely from another network.
To configure an IPv4 default gateway on a switch, use the ip default-gateway ip-address global configuration command.












***

# IPv4 Addressing #



Module 11: 
11.1 IPv4 address structure
IPv4 address structure
Network and host portions
An IPv4 address is a 32-bit hierarchical address that is made up of a network portion and a host portion.

When determining the network portion versus the host portion, you have to look at the 32-bit stream.
A subnet mask is used to determine the network and host portions.
IPv4 address structure The subnet mask
To identify the network and host portions of an IPv4 address, the subnet mask is compared to the IPv4 address bit by bit, from left to right.

The actual process used to identify the network and host portions is called ANDing.

Structure of an IPv4 address The prefix length
Structure of an IPv4 address The prefix length
A prefix length is a less cumbersome method used to identify a subnet mask address.
The prefix length is the number of bits set to 1 in the subnet mask.

It is written in "slash notation", so count the number of bits in the subnet mask and add it with a slash.

IPv4 address structure Network determination: logical AND

A logical Boolean AND operation is used to determine the network address.
And logical is the two-bit comparison where only a 1 AND 1 produces a 1 and any other combination results in a 0.
1 AND 1 = 1, 0 AND 1 = 0, 1 AND 0 = 0, 0 AND 0 = 0
1 = True and 0 = False
To identify the network address, the IPv4 address of the host is logically AND, bit by bit, with the subnet mask to identify the network address.

Structure of an IPv4 Address Network, Host, and Broadcast Addresses
Within each network there are three types of IP addresses:
Network address
Host addresses
Broadcast address

MÃ¡scara de subred
255.255.255.0 o /24
255 255 25511111111 111111 1111 1111
000000000

DirecciÃ³n de red
192.168.10.0 o/24
192 168 1011000000 10100000 00001010
000000000  All 0s

Primera direcciÃ³n
192.168.10.1 o /24
192 168 1011000000 10100000 00001010
100000001 All 0s and a 1

Ãšltima direcciÃ³n
192.168.10.254 o /24
192 168 1011000000 10100000 00001010
25411111110
All 1s and a 0

DirecciÃ³n de broadcast
192.168.10.255 o /24
192 168 1011000000 10100000 00001010
25511111111
All 1s

11.2 IPv4 Unicast, Broadcast, and Multicast

IPv4 Unicast, Broadcast, and Multicast Unicast

Unicast transmission is sending a packet to a destination IP address.

For example, the PC at 172.16.4.1 sends a unicast packet to the printer at 172.16.4.253.

IPv4 Unicast, Broadcast, and Multicast Broadcast
Broadcast transmission is sending a packet to all other destination IP addresses.

For example, the PC at 172.16.4.1 sends a broadcast packet to all IPv4 hosts.

IPv4 Unicast, Broadcast, and Multicast Multicast

The multicast transmission is sending a packet to a group of multicast addresses.

For example, the PC at 172.16.4.1 sends a multicast packet to the multicast group address 224.10.10.5.

11.3 Types of IPv4 addresses
Types of IPv4 addresses Public and private IPv4 addresses
As defined in RFC 1918, public IPv4 addresses are globally routed between Internet Service Provider (ISP) routers.

Private addresses are common blocks of addresses used by most organizations to assign IPv4 addresses to internal hosts.

Private IPv4 addresses are not unique and can be used by any internal network.

However, private addresses are not globally routable.

Network Address and Prefix RFC 1918 Private Address Range
10.0.0.0/8 10.0.0.0 to 10.255.255.255
172.16.0.0/12 172.16.0.0 to 172.31.255.255
192.168.0.0/16 192.168.0.0 to 192.168.255.255

Types of IPv4 addresses Routing to the Internet
Network Address Translation (NAT) translates private IPv4 addresses to public IPv4 addresses.
NAT is normally enabled on the edge router that connects to the Internet.

Translates the internal private address to a public global IP address.


Types of IPv4 addresses Public and private IPv4 addresses

Loopback addresses
127.0.0.0 / 8 (127.0.0.1 to 127.255.255.254)
Commonly identified as only 127.0.0.1
Used on a host to test if TCP / IP is operational.

Link local addresses
169.254.0.0 / 16 (169.254.0.1 to 169.254.255.254)
Commonly known as Automatic Private IP Addressing (APIPA) addresses or self-assigned addresses.
Used by Windows DHCP clients to self-configure when no DHCP servers are available.

Types of IPv4 Addresses Legacy Classful Addressing
RFC 790 (1981) asigna direcciones IPv4 en clases
Clase A (0.0.0.0/8 a 127.0.0.0/8)
Clase B (128.0.0.0 /16 â€” 191.255.0.0 /16)
Clase C (192.0.0.0 /24 â€” 223.255.255.0 /24)
Clase D (224.0.0.0 a 239.0.0.0)
Clase E (240.0.0.0 â€” 255.0.0.0)

Classful addressing wasted a lot of IPv4 addresses.

Classful addressing has been replaced with classless addressing that ignores the rules of classes (A, B, C).

Types of IPv4 Addresses IP Address Assignment
The Internet Assigned Numbers Authority (IANA) manages and assigns IPv4 and IPv6 address blocks to five Regional Internet Registries (RIRs).
RIRs are responsible for assigning IP addresses to ISPs that provide IPv4 address blocks to ISPs and smaller organizations.

11.4 Network segmentation

Network segmentation Broadcast domains and segmentation
Many protocols use broadcasts or multicasts (for example, ARP uses broadcasts to locate other devices, hosts send DHCP discovery broadcasts to locate a DHCP server).
The switches propagate broadcasts on all interfaces, except for the one on which they were received.
The only device that stops transmissions is a router.
Routers do not propagate broadcasts.
Each router interface connects to a broadcast domain, and transmissions only propagate within that specific broadcast domain.

Network segmentation Problems with large broadcast domains
One problem with a large broadcast domain is that these hosts can generate excessive broadcasts and negatively affect the network.

The solution is to reduce the size of the network to create smaller broadcast domains through a process called subnetting.

Dividing the network address 172.16.0.0 / 16 into two subnets of 200 users each: 172.16.0.0 / 24 and 172.16.1.0 / 24.
Broadcasts are only propagated within the smallest broadcast domains

Network Segmentation Reasons for Subnetting

Subnetting decreases overall network traffic and improves performance.
It can be used to enforce cross-subnet security policies.
The subnet reduces the number of devices affected by abnormal broadcast traffic.
Subnets are used for a variety of reasons, including:

11.5 Subnetting an IPv4 network
Subnet an IPv4 network Subnetting at octet boundary

Networks are more easily subdivided at the / 8/16 and / 24 octet boundary.

Note that using longer prefix lengths decreases the number of hosts per subnet.
Longitud de prefijo MÃ¡scara de subred MÃ¡scara de subred en sistema binario (n = red, h= host) Cantidad de hosts
/8 255.0.0.0 nnnnnnnn.hhhhhhhh.hhhhhhhh.hhhhhhhh 11111111.00000000.00000000.00000000 16777214
/16 255.255.0.0 nnnnnnnn.nnnnnnnn.hhhhhhhh.hhhhhhhh 11111111.11111111.00000000.00000000 65534
/24 255.255.255.0 nnnnnnnn.nnnnnnnn.nnnnnnnn.hhhhhhhh 11111111.11111111.11111111.00000000 254

Subnetting an IPv4 Network Subnetting at Octet Boundary (Cont.)
In the first table 10.0.0.0/8 is subnetted using / 16 and in the second table, a / 24 mask.

Subnet address (256 possible subnets) Host range (65,534 possible hosts per subnet) Address
10.0.0.0/16 10.0.0.1 - 10.0.255.254  10.0.255.255
10.1.0,0/16 10.1.0.1 - 10.1.255.254  10.1.255.255
10.2.0.0/16 10.2.0.1 - 10.2.255.254  10.2.255.255
10,3,0.0/16 10,30,1 - 10,3.255.254  10.3.255.255
10,4,0.0/16 10,4,0,1 - 10,4,255,254 10.4.255.255
10,5,0.0/16 10,5,0,1 - 10,5,255,254  10.5.255.255
10,6,0.0/16  10,6,0,1 - 10,6.255.254 10.6.255.255
10,7,0.0/16 10,7,0,1 - 10,7,255,254  10.7.255.255
NEXT
10.255,0.0/16 10.255.0.1 - 10.255.255.254  10.255.255.255

Subnet address (65,536 possible subnets) Host range (254 possible hosts per subnet) Address
10.0.0.0/24 10.0.0.1 -10.0.0.254 10.0.0.255
10.0.1.0/24 10.0.1.1 - 10.0.1.254  10.0.1.255
10.0.2.0/24 10.0.2.1 - 10.0.2.254  10.0.2.255
NEXT
10.0.255.0/24 10.0.255.1 - 10.0.255.254  10.0.255.255
10.1.0.0/24 10.1.0.1 - 10.1.0.254 10.1.0.255
10.1.1.0/24  10.1.1.1 - 10.1.1.254  10.1.1.255
10.1.2.0/24 10.1.2.1 - 10.1.2254  10.1.2.255
NEXT  
10.100,0.0/24 10,100,0,1 - 10,100,0 ,254  10.100,0.255
NEXT
10.255.255.0/24 10.255.255.1 -10.2255.255.254 10.255.255.255

Prefix length Subnet mask Subnet mask in binary system (n = network, h = host) Number of subnets Number of hosts


/25 255.255.255.128 nnnnnnnn.nnnnnnnn.nnnnnnnn.nhhhhhhh11111111.11111111.11111111.10000000 2 126
/26 255.255.255.192 nnnnnnnn.nnnnnnnn.nnnnnnnn.nnhhhhhh11111111.11111111.11111111.11000000 4 62 
/27 255.255.255.224 nnnnnnnn.nnnnnnnn.nnnnnnnn.nnnhhhhh11111111.11111111.11111111.11100000 8 30 
/28 255.255.255.240 nnnnnnnn.nnnnnnnn.nnnnnnnn.nnnnhhhh11111111.11111111.11111111.11110000 16 14 
/29 255.255.255.248 nnnnnnnn.nnnnnnnn.nnnnnnnn.nnnnnhhh11111111.11111111.11111111.11111000 32 6 
/30 255.255.255.252 nnnnnnnn.nnnnnnnn.nnnnnnnn.nnnnnnhh11111111.11111111.11111111.11111100 64 2


11.6 Subnetting a / 16 and / 8 prefix
Subnet a / 16 and / 8 prefix Create subnets with a / 16 prefix

The table highlights all possible scenarios for subnetting a / 16 prefix.


Prefix length Subnet mask Network address (n = network, h = host) Number of subnets Number of hosts
/17 - 255.255.128,0 nnnnnnnn.nnnnnnnn.nhhhhhhh.hhhhhhhh 11111111.11111111.10000000.00000000 2 32766
/18 - 255.255.192,0 nnnnnnnn.nnnnnnnn.nnhhhhhh.hhhhhhhh 11111111.11111111.11000000.00000000 4 16382
/19 - 255.255.224,0 nnnnnnnn.nnnnnnnn.nnnhhhhh.hhhhhhhh 11111111.11111111.11100000.00000000 8 8190
/20 - 255.255.240,0 nnnnnnnn.nnnnnnnn.nnnnhhhh.hhhhhhhh 11111111.11111111.11110000.00000000 16 4094
/21 - 255.255.248,0 nnnnnnnn.nnnnnnnn.nnnnnhhh.hhhhhhhh 11111111.11111111.11111000.00000000 32 2046
/22 - 255.255.252,0 nnnnnnnn.nnnnnnnn.nnnnnnhh.hhhhhhhh 11111111.11111111.11111100.00000000 64 1022
/23 - 255.255.254,0 nnnnnnnnnnnnnnnn. nnnnnnnh.hhhhhhh 11111111111111.11111110,00000000 128 510
/24 - 255.255.255.0 nnnnnnnnnnnnnnnn. nnnnnnnn.hhhhhhh 11111111111111.11111111.00000000 256 254
/25 - 255.255.255.128 nnnnnnnnnnnnnnnn. nnnnnnnnn.nhhhhhh 11111111111111.11111111.10000000 512 126
/26 - 255.255.255.192 nnnnnnnnnnnnnnnn. nnnnnnnnnnhhhhhh 11111111111111.11111111.11000000 1024 62
/27 - 255.255.255.224 nnnnnnnnnnnnnnnn. nnnnnnnnnnnhhhhh 11111111111111.11111111.11100000 2048 30
/28 255.255.255. 240 nnnnnnnnnnnnnnnn. nnnnnnnnnnnnhhhh 111111111111.11111111.11110000 4096 14
/29 - 255.255.255.248 nnnnnnnnnnnnnnnn. nnnnnnnnnnnnhhh 111111111111.11111111.11111000 8192 6
/30 - 255.255.255.252 nnnnnnnnnnnnnnnn. nnnnnnnnnnnnhh 11111111111111.11111111.111100 16384 2

Subnet a / 16 and / 8 prefix Create 100 subnets with a / 16 prefix

Imagine a large company that requires at least 100 subnets and chose the private address 172.16.0.0/16 as its internal network address.

The figure shows the number of subnets that can be created by borrowing bits from the third and fourth octets.
Note that there are now up to 14 host bits that can be borrowed (that is, the last two bits cannot be borrowed).

To satisfy the 100 subnet requirement for the enterprise, 7 bits would need to be lent (that is, 27 = 28 subnets) (for a total of 128 subnets).

Subnet a / 16 and / 8 prefix Create 1000 subnets with a / 8 prefix

Consider a small ISP that requires 1000 subnets for its clients using the 10.0.0.0/8 network address, which means that there are 8 bits in the network part and 24 host bits available to borrow for subnets.
The figure shows the number of subnets that can be created by borrowing bits from the second and third.
Note that there are now up to 22 host bits that can be borrowed (that is, the last two bits cannot be borrowed).

To satisfy the 1000 subnet requirement for the enterprise, 10 bits would be borrowed (i.e. 2 10 = 1024 subnets) (for a total of 128 subnets)

11.7 Subnet to meet requirements

Subnet to meet the requirements Private subnet vs. public IPv4 address space

Business networks will have a:
Intranet: The internal network of a company normally uses private IPv4 addresses.
DMZ - A company facing Internet servers. Devices in the DMZ use public IPv4 addresses.

A company could use 10.0.0.0/8 and the subnet at the / 16 or / 24 network boundary.

DMZ devices would have to be configured with public IP addresses.

Subnet to meet requirements Minimize unused host IPv4 addresses and Maximize subnets

There are two factors to consider when planning your subnets:
The number of host addresses required for each network
The number of individual subnets required


Prefix length Subnet mask Subnet mask in binary system (n = network, h = host) Number of subnets Number of hosts
/25 255.255.255.128 nnnnnnnn.nnnnnnnn.nnnnnnnn.nhhhhhhh11111111.11111111.11111111.10000000 2 126
/26 255.255.255.192 nnnnnnnn.nnnnnnnn.nnnnnnnn.nnhhhhhh11111111.11111111.11111111.11000000 4 62
/27 255.255.255.224 nnnnnnnn.nnnnnnnn.nnnnnnnn.nnnhhhhh11111111.11111111.11111111.11100000 8 30
/28 255.255.255.240 nnnnnnnn.nnnnnnnn.nnnnnnnn.nnnnhhhh11111111.11111111.11111111.11110000 16 14
/29 255.255.255.248 nnnnnnnn.nnnnnnnn.nnnnnnnn.nnnnnhhh11111111.11111111.11111111.11111000 32 6
/30 255.255.255.252 nnnnnnnn.nnnnnnnn.nnnnnnnn.nnnnnnhh11111111.11111111.11111111.11111100 64 2


Subnet Example to Meet Requirements: Efficient IPv4 Subnets

In this example, your ISP has assigned a public network address of 172.16.0.0/22 â€‹â€‹(10 host bits) to your headquarters that provides 1,022 host addresses.

There are five sites and therefore five Internet connections, which means that the organization requires 10 subnets with the largest subnet requiring 40 addresses.

You assigned 10 subnets with a / 26 subnet mask (that is, 255.255.255.192).

11.8 VLSM

Preservation of IPv4 VLSM addresses

Given the topology, 7 subnets are required (that is, four LANs and three WAN links) and the largest number of hosts is in Building D with 28 hosts.

A / 27 mask would provide 8 subnets of 30 host IP addresses and therefore support this topology.

IPv4 VLSM Address Preservation (cont.)
However, point-to-point WAN links only require two addresses and therefore waste 28 addresses each for a total of 84 unused addresses.
Applying a traditional subnetting scheme to this situation is not very efficient and is wasteful.

VLSM was developed to avoid wasted addresses by allowing us to subnet a subnet.

VLSM VLSM

The left side shows the traditional subnet scheme (that is, the same subnet mask) while the right side illustrates how VLSM can be used to subnet a subnet and divide the last subnet into eight / 30 subnets.

When using VLSM, always start by meeting the host requirements of the largest subnet and continue the subnet until the host requirements of the smallest subnet are met.

The resulting topology with VLSM applied.

VLSM VLSM Topology Address Assignment

Using VLSM subnets, LANs and inter-router networks can be addressed without unnecessary waste, as shown in the logical topology diagram.

11.9 Structured design

Structured design Network address planning

IP network planning is crucial to developing a scalable solution to an enterprise network.
To develop an addressing scheme for the entire IPv4 network, you need to know how many subnets are needed, how many hosts a particular subnet requires, which devices are part of the subnet, which parts of the network use private addresses and which use public addresses, and many others. determining factors.

Examine the needs of an organization's network usage and how the subnets will be structured.
Conduct a network requirements study by looking at the entire network to determine how each area will be segmented.
Determine how many subnets are needed and how many hosts per subnet.
Determine DHCP address pools and Layer 2 VLAN groups.

Structured Design Device Addressing

Within a network, there are different types of devices that require addresses:
End User Clients - Most use DHCP to reduce errors and the burden on network support personnel. IPv6 clients can obtain address information using DHCPv6 or SLAAC.
Servers and peripherals: - must have a predictable static IP address.
Servers that can be accessed from the Internet - Servers must have a public IPv4 address, which is most often accessed via NAT.
Intermediary devices: - These devices are assigned addresses for network management, monitoring, and security.
Gateway - Routers and firewall devices are gateways for hosts on that network.

When developing an IP addressing scheme, it is generally recommended that you have an established pattern of how addresses are assigned to each type of device.












***

# Transport Layer #

**Fourth Layer**

Module 14: 
1.4.1 Data transport
Data transport Function of the transport layer

The transport layer is:
Responsible for logical communications between applications running on different hosts.
Link between the application layers and the lower layers that are responsible for transmission through the network.
Data transport Transport layer tasks
The transport layer has the following responsibilities:
Track individual conversations
Segmentation of data and reassembly of segments
Add header information
Identify, separate and manage multiple conversations
Uses segmentation and multiplexing to allow different communication conversations to be interspersed on the same network
Data transport Transport layer protocols
IP does not specify how the packages are delivered or transported.
Transport layer protocols specify how to transfer messages between hosts and are responsible for managing the reliability requirements of a conversation.
The transport layer includes the TCP and UDP protocols.
Transmission Control Protocol

TCP provides reliability and flow control Basic TCP operations:
Number and track data segments transmitted to a specific host from a specific application
Confirm data received
Re-transmit any unrecognized information after a certain period of time
Sequence data that may arrive in the wrong order
Send data at an efficient speed that is acceptable to the receiver

Data User Datagram Protocol (UDP)
UDP provides the basic functions to deliver data segments between the appropriate applications, with very little overhead and data review.
UDP is a connectionless protocol.
UDP is also known as a best-effort delivery protocol because there is no recognition that data is being received at the destination.

Data transport The appropriate transport layer protocol for the application in question
UDP is also used by request and response applications where data is minimal, and retransmission can be done quickly.

If it is important that all data arrive and that it can be processed in its proper sequence, TCP is used as the transport protocol.
14.2 TCP Overview
TCP Overview TCP Features

Establish a session -TCP is a connection-oriented protocol that negotiates and establishes a permanent connection (or session) between source and destination devices before forwarding any traffic.
Ensures Reliable Delivery- For many reasons, it is possible for a segment to be corrupted or lost entirely as it is transmitted over the network. TCP ensures that each segment sent by the source reaches the destination.
Provide same-order delivery - Because networks can provide multiple routes that may have different transmission speeds, data may arrive in the wrong order.
Supports flow control: - Network hosts have limited resources (that is, memory and processing power). When TCP notices that these resources are overloaded, it can request that the sending application slow down the data flow.
TCP Overview TCP Header
TCP is a stateful protocol, which means that it keeps track of the state of the communication session.

TCP records what information was sent and what information was recognized.
Introduction to TCP TCP header fields

TCP header field Description
Source Port 16-bit field used to identify the source application by port number.
Destination port 16-bit field used to identify the destination application by port number.
Sequence number 32-bit field used to reassemble data.
32-bit A 32-bit field used to indicate that data has been received and the next expected byte from the source.
Header length A 4-bit field known as the "data offset" that indicates the length of the TCP segment header.
Reserved A 6-bit field that is reserved for future use.
Control bits A 16-bit field used that includes bit codes, or flags, that indicate the purpose and function of the TCP segment.
Window size A 16-bit field used to indicate the number of bytes that can be accepted
Checksum A 16-bit field used for error checking of the segment header and data.
Urgent 16-bit field used to indicate whether the data contained is urgent.

TCP overview Applications that use TCP
TCP handles all the tasks associated with dividing the data flow into segments, providing reliability, controlling the flow of data, and reordering segments.

14.3 UDP overview
UDP Overview UDP Features
UDP features include the following:
The data is rebuilt in the order it was received.
Lost segments are not resent.
There is no session establishment.
The shipment is not informed about the availability of resources
UDP Overview UDP Header

The UDP header is much simpler than the TCP header because it only has four fields and requires 8 bytes (that is, 64 bits).

UDP Overview UDP Header Fields
The table identifies and describes the four fields of a UDP header.

UDP header field Description
Source Port 16-bit field used to identify the source application by port number.
Destination port 16-bit field used to identify the destination application by port number.
Length 16-bit field that indicates the length of the UDP datagram header.
Checksum 16-bit field used for datagram header and data error checking.

UDP overview Applications that use TCP
Live Video and Multimedia Applications: - These applications can tolerate some data loss, but require little or no delay. Examples include VoIP and live video streaming.
Simple Request and Response Applications: Simple transactional applications in which a request is sent by a host and there is a possibility that it will receive a response or not. Examples include DNS and DHCP.
Applications that handle reliability on their own: - One-way communications where flow control, error detection, acknowledgments, and error recovery are not required or can be handled by the application. Examples include SNMP and TFTP.



14.4 Port numbers

Port numbers Multiple separate communications

The TCP and UDP transport layer protocols use port numbers to handle multiple simultaneous conversations.

The source port number is associated with the source application on the local host, while the destination port number is associated with the destination application on the remote host.

Port numbers Socket pairs

The source and destination ports are placed within the segment.
The segments are encapsulated within an IP packet.
The combination of the source IP address and the source port number, or the destination IP address and the destination port number, is known as a socket.
Sockets allow the various processes running on a client to be distinguished from one another. They also allow the differentiation of different connections to a server process.

Port numbers Port number groups

Port group Number range Description
Well-known ports 0 to 1,023 These are generally used for applications such as web browsers, email clients, and remote access clients.
Well-known ports defined for common server applications allow clients to easily identify the required associated service.
Registered ports 1,024 to 49,151 These port numbers are assigned to a requesting entity for use with specific processes or applications.
These processes are primarily individual applications that the user chooses to install rather than common applications that would receive a known port number.
For example, Cisco has registered port 1812 for its RADIUS server authentication process.
Private and / or Dynamic ports. 49,152 to 65,535 These ports are also known as ephemeral ports.
The client operating system typically assigns port numbers dynamically when a connection to a service is initiated.
The dynamic port is then used to identify the client application during communication.

Internet port number Application
20 TCP File Transfer Protocol (FTP) - Data
21 TCP File Transfer Protocol (FTP) - Control
22 TCP Secure Shell (SSH)
23 TCP Telnet
25 TCP Simple Mail Transfer Protocol (SMTP)
53 UDP, TCP Domain Name Service (DNS)
67 UDP Dynamic Host Configuration Protocol (DHCP) - Server
68 UDP Dynamic Host Configuration Protocol - Client
69 UDP Trivial File Transfer Protocol (TFTP)
80 TCP Hypertext Transfer Protocol (HTTP)
110 TCP Post Office Protocol Version 3 (POP3)
143 TCP Internet Message Access Protocol (IMAP)
161 UDP Simple Network Management Protocol (SNMP)
443 TCP Hypertext Transfer Protocol Secure (HTTPS)

14.5 TCP communication process
TCP communication process TCP server process

Each application process running on the server to use a port number.
An individual server cannot have two services assigned the same port number within the same transport layer services.
An active server application assigned to a specific port is considered open, which means that the transport layer accepts and processes the segments directed to that port.
Any incoming request from a client directed to the correct socket is accepted and the data is sent to the server application.

Communication process in TCP Establishing TCP connections
Step 1: The source client requests a client-to-server communication session with the server.
Step 2: The server acknowledges the client-to-server communication session and requests a server-to-client communication session.
Step 3: The originating client acknowledges the server-to-client communication session.

Communication process in TCP Termination of the TCP session

Step 1: When the client has no more data to send in the stream, it sends a segment with the FIN flag set.
Step 2: The server sends an ACK to confirm the FIN flag and end the client-to-server session.
Step 3: The server sends a FIN to the client to end the server-to-client session.
Step 4: The client responds with an ACK to confirm the FIN from the server

Communication process in TCP Analysis of the TCP three-way handshake

Three-way link features:
Establishes that the target device is present on the network.
Verify that the destination device has an active service and accepts requests on the destination port number that the source client wants to use.
Informs the target device that the source client is trying to establish a communication session on that port number
Once the communication is complete, the sessions are closed and the connection is ended. The connection and session mechanisms enable the reliability function of TCP.

Communication process in TCP Three-way TCP handshake analysis

The six check bit flags are as follows:
URG - Important Urgent Indicator Field.
ACK - Acknowledgment indicator used in connection establishment and session termination.
PSH - Push function.
RST- Reestablish a connection when an error occurs or times out.
SYN - Synchronize sequence numbers used in connection establishment.
END - No more sender data and is used at the termination of the session

14.6 - Reliability and flow control

Reliability and flow control TCP reliability: Guaranteed and orderly delivery

TCP can also help keep packets flowing so devices don't get overloaded.
Sometimes TCP segments do not reach their destination or do not arrive in order.
All data must be received and the data in these segments must be reassembled in the original order.
To achieve this, sequence numbers are assigned in the header of each packet.

Reliability and Flow Control TCP Reliability - Data Loss and Retransmission

No matter how well designed a network is, data loss occasionally occurs.
TCP provides methods for managing segment loss. Among these is a mechanism to retransmit segments for unacknowledged data.

Reliability and Flow Control TCP Reliability - Data Loss and Retransmission (Cont.)
Host operating systems today typically employ an optional TCP feature called selective handshake (SACK), negotiated during the three-way handshake.
If both hosts support SACK, the receiver can explicitly recognize which segments (bytes) were received, including discontinuous segments.

Reliability and flow control TCP flow control: window size and acknowledgments

TCP also provides flow control mechanisms.

Flow control is the amount of data that the destination can reliably receive and process.

Flow control allows you to maintain the reliability of TCP transmission by adjusting the speed of the data flow between the source and the destination for a given session.

Reliability and TCP flow control Flow control: maximum segment size

Maximum Segment Size (MSS) is the maximum amount of data that the target device can receive.

A common MSS is 1,460 bytes when using IPv4.
A host determines the value of its MSS field by subtracting the IP and TCP headers from Ethernet Maximum Transmission Unit (MTU).
1500 minus 60 (20 bytes for the IPv4 header and 20 bytes for the TCP header) leaves 1460 bytes.

Reliability and Flow Control TCP Flow Control: Congestion Prevention
When congestion occurs on a network, the overloaded router begins to drop packets.

To avoid and control congestion, TCP employs various mechanisms, timers, and congestion handling algorithms.

14.7 UDP communication

Communication process in UDP Comparison of low overhead and reliability of UDP

UDP does not establish a connection. UDP provides data transport with low overhead because it has a small datagram header with no network management traffic.

Communication process in UDP Reassembly of UDP datagrams

UDP does not keep track of sequence numbers in the way that TCP does.
UDP cannot reorder datagrams in the order of transmission.
UDP simply reassembles the data in the order it was received and sends it to the application

Communication process in UDP UDP server requests and processes

UDP-based server applications are assigned known or registered port numbers.

UDP receives a datagram destined for one of those ports, sends the application data to the appropriate application based on its port number

Communication process in UDP UDP client processes

The UDP client process dynamically selects a port number from the range of port numbers and uses it as the source port for the conversation.
Typically, the destination port is the well-known or registered port number that is assigned to the server process.
After the client selects the source and destination ports, this same port pair is used in the header of all datagrams used in the transaction.






























